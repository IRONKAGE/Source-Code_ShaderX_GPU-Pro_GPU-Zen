<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PowerVR SDK</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<table width="100%">
  <tr>
    <td width="33%">
      <p align="left">&nbsp;<a href="http://www.imgtec.com"><img border="0" src="IMGLogo.jpg" width="200" height="30"></a></p>
    </td>
    <td width="33%">
      <p align="center"><font color="#808080" face="Arial" size="2">PowerVR Software Development Kit</a></font></p>
    </td>
    <td width="34%">
      <p align="right"><a href="http://www.powervr.com"><img border="0" src="PVRlogo.jpg" width="200" height="27"></a></p>
    </td>
  </tr>
</table>
<hr>
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>PVRTVector.h</h1><a href="PVRTVector_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/******************************************************************************</span>
00002 <span class="comment"></span>
00003 <span class="comment"> @File         PVRTVector.h</span>
00004 <span class="comment"></span>
00005 <span class="comment"> @Title        PVRTVector</span>
00006 <span class="comment"></span>
00007 <span class="comment"> @Version      </span>
00008 <span class="comment"></span>
00009 <span class="comment"> @Copyright    Copyright (C)  Imagination Technologies Limited.</span>
00010 <span class="comment"></span>
00011 <span class="comment"> @Platform     ANSI compatible</span>
00012 <span class="comment"></span>
00013 <span class="comment"> @Description  Vector and matrix mathematics library</span>
00014 <span class="comment"></span>
00015 <span class="comment">******************************************************************************/</span>
00016 <span class="preprocessor">#ifndef __PVRTVECTOR_H__</span>
00017 <span class="preprocessor"></span><span class="preprocessor">#define __PVRTVECTOR_H__</span>
00018 <span class="preprocessor"></span>
00019 <span class="preprocessor">#include "assert.h"</span>
00020 <span class="preprocessor">#include "<a class="code" href="PVRTGlobal_8h.html">PVRTGlobal.h</a>"</span>
00021 <span class="preprocessor">#include "<a class="code" href="PVRTFixedPoint_8h.html">PVRTFixedPoint.h</a>"</span>
00022 <span class="preprocessor">#include "<a class="code" href="PVRTMatrix_8h.html">PVRTMatrix.h</a>"</span>
00023 <span class="preprocessor">#include &lt;string.h&gt;</span>
00024 <span class="preprocessor">#include &lt;math.h&gt;</span>
00025 
00026 <span class="comment">/*!***************************************************************************</span>
00027 <span class="comment">** Forward Declarations for vector and matrix structs</span>
00028 <span class="comment">****************************************************************************/</span>
00029 <span class="keyword">struct </span><a class="code" href="structPVRTVec4.html">PVRTVec4</a>;
00030 <span class="keyword">struct </span><a class="code" href="structPVRTVec3.html">PVRTVec3</a>;
00031 <span class="keyword">struct </span><a class="code" href="structPVRTMat3.html">PVRTMat3</a>;
00032 <span class="keyword">struct </span><a class="code" href="structPVRTMat4.html">PVRTMat4</a>;
00033 
00034 <span class="comment">/*!***************************************************************************</span>
00035 <span class="comment"> @Function          PVRTLinearEqSolve</span>
00036 <span class="comment"> @Input             pSrc    2D array of floats. 4 Eq linear problem is 5x4</span>
00037 <span class="comment">                            matrix, constants in first column</span>
00038 <span class="comment"> @Input             nCnt    Number of equations to solve</span>
00039 <span class="comment"> @Output            pRes    Result</span>
00040 <span class="comment"> @Description       Solves 'nCnt' simultaneous equations of 'nCnt' variables.</span>
00041 <span class="comment">                    pRes should be an array large enough to contain the</span>
00042 <span class="comment">                    results: the values of the 'nCnt' variables.</span>
00043 <span class="comment">                    This fn recursively uses Gaussian Elimination.</span>
00044 <span class="comment">*****************************************************************************/</span>
00045 <span class="keywordtype">void</span> <a class="code" href="PVRTVector_8h.html#a0">PVRTLinearEqSolve</a>(VERTTYPE * <span class="keyword">const</span> pRes, VERTTYPE ** <span class="keyword">const</span> pSrc, <span class="keyword">const</span> <span class="keywordtype">int</span> nCnt);
00046 
00047 <span class="comment">/*!***************************************************************************</span>
00048 <span class="comment">    ** PVRTVec2 2 component vector</span>
00049 <span class="comment">    ****************************************************************************/</span>
00050 <span class="keyword">struct </span><a class="code" href="structPVRTVec2.html">PVRTVec2</a>
<a name="l00051"></a><a class="code" href="structPVRTVec2.html">00051</a> {
00052     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> x, y;
<a name="l00053"></a><a class="code" href="structPVRTVec2.html#o1">00053</a>     <span class="comment">/*!***************************************************************************</span>
00054 <span class="comment">        ** Constructors</span>
00055 <span class="comment">        ****************************************************************************/</span>
00056     <span class="comment">/*!***************************************************************************</span>
00057 <span class="comment">        @Function           PVRTVec2</span>
00058 <span class="comment">        @Description        Blank constructor.</span>
00059 <span class="comment">        *****************************************************************************/</span>
00060     <a class="code" href="structPVRTVec2.html#a0">PVRTVec2</a>() {}
00061     <span class="comment">/*!***************************************************************************</span>
<a name="l00062"></a><a class="code" href="structPVRTVec2.html#a0">00062</a> <span class="comment">        @Function           PVRTVec2</span>
00063 <span class="comment">        @Input              fX  X component of vector</span>
00064 <span class="comment">        @Input              fY  Y component of vector</span>
00065 <span class="comment">        @Description        Simple constructor from 2 values.</span>
00066 <span class="comment">        *****************************************************************************/</span>
00067     <a class="code" href="structPVRTVec2.html#a0">PVRTVec2</a>(VERTTYPE fX, VERTTYPE fY) : x(fX), y(fY) {}
00068     <span class="comment">/*!***************************************************************************</span>
00069 <span class="comment">        @Function           PVRTVec2</span>
<a name="l00070"></a><a class="code" href="structPVRTVec2.html#a1">00070</a> <span class="comment">        @Input              fValue  a component value</span>
00071 <span class="comment">        @Description        Constructor from a single value.</span>
00072 <span class="comment">        *****************************************************************************/</span>
00073     <a class="code" href="structPVRTVec2.html#a0">PVRTVec2</a>(VERTTYPE fValue) : x(fValue), y(fValue) {}
00074     <span class="comment">/*!***************************************************************************</span>
00075 <span class="comment">        @Function           PVRTVec2</span>
00076 <span class="comment">        @Input              pVec    an array</span>
<a name="l00077"></a><a class="code" href="structPVRTVec2.html#a2">00077</a> <span class="comment">        @Description        Constructor from an array</span>
00078 <span class="comment">        *****************************************************************************/</span>
00079     <a class="code" href="structPVRTVec2.html#a0">PVRTVec2</a>(<span class="keyword">const</span> VERTTYPE* pVec) : x(pVec[0]), y(pVec[1]) {}
00080     <span class="comment">/*!***************************************************************************</span>
00081 <span class="comment">        @Function           PVRTVec2</span>
00082 <span class="comment">        @Input              v3Vec a Vec3</span>
00083 <span class="comment">        @Description        Constructor from a Vec3</span>
<a name="l00084"></a><a class="code" href="structPVRTVec2.html#a3">00084</a> <span class="comment">        *****************************************************************************/</span>
00085     <a class="code" href="structPVRTVec2.html#a0">PVRTVec2</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; v3Vec);
00086     <span class="comment">/*!***************************************************************************</span>
00087 <span class="comment">        ** Operators</span>
00088 <span class="comment">        ****************************************************************************/</span>
00089     <span class="comment">/*!***************************************************************************</span>
00090 <span class="comment">        @Function           +</span>
00091 <span class="comment">        @Input              rhs another Vec2</span>
00092 <span class="comment">        @Returns            result of addition</span>
00093 <span class="comment">        @Description        componentwise addition operator for two Vec2s</span>
00094 <span class="comment">        *****************************************************************************/</span>
00095     <a class="code" href="structPVRTVec2.html">PVRTVec2</a> <a class="code" href="structPVRTVec2.html#a5">operator+</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; rhs)<span class="keyword"> const</span>
00096 <span class="keyword">    </span>{
00097         <a class="code" href="structPVRTVec2.html">PVRTVec2</a> out(*<span class="keyword">this</span>);
00098         <span class="keywordflow">return</span> out += rhs;
00099     }
00100     <span class="comment">/*!***************************************************************************</span>
00101 <span class="comment">        @Function           -</span>
<a name="l00102"></a><a class="code" href="structPVRTVec2.html#a5">00102</a> <span class="comment">        @Input              rhs another Vec2</span>
00103 <span class="comment">        @Returns            result of subtraction</span>
00104 <span class="comment">        @Description        componentwise subtraction operator for two Vec2s</span>
00105 <span class="comment">        ****************************************************************************/</span>
00106     <a class="code" href="structPVRTVec2.html">PVRTVec2</a> <a class="code" href="structPVRTVec2.html#a6">operator-</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; rhs)<span class="keyword"> const</span>
00107 <span class="keyword">    </span>{
00108         <a class="code" href="structPVRTVec2.html">PVRTVec2</a> out(*<span class="keyword">this</span>);
00109         <span class="keywordflow">return</span> out -= rhs;
00110     }
00111 
00112     <span class="comment">/*!***************************************************************************</span>
00113 <span class="comment">        @Function           +=</span>
<a name="l00114"></a><a class="code" href="structPVRTVec2.html#a6">00114</a> <span class="comment">        @Input              rhs another Vec2</span>
00115 <span class="comment">        @Returns            result of addition</span>
00116 <span class="comment">        @Description        componentwise addition and assignment operator for two Vec2s</span>
00117 <span class="comment">        ****************************************************************************/</span>
00118     <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; <a class="code" href="structPVRTVec2.html#a7">operator+=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; rhs)
00119     {
00120         x += rhs.<a class="code" href="structPVRTVec2.html#o0">x</a>;
00121         y += rhs.<a class="code" href="structPVRTVec2.html#o1">y</a>;
00122         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00123     }
00124 
00125     <span class="comment">/*!***************************************************************************</span>
00126 <span class="comment">        @Function           -=</span>
<a name="l00127"></a><a class="code" href="structPVRTVec2.html#a7">00127</a> <span class="comment">        @Input              rhs another Vec2</span>
00128 <span class="comment">        @Returns            result of subtraction</span>
00129 <span class="comment">        @Description        componentwise subtraction and assignment operator for two Vec2s</span>
00130 <span class="comment">        ****************************************************************************/</span>
00131     <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; <a class="code" href="structPVRTVec2.html#a8">operator-=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; rhs)
00132     {
00133         x -= rhs.<a class="code" href="structPVRTVec2.html#o0">x</a>;
00134         y -= rhs.<a class="code" href="structPVRTVec2.html#o1">y</a>;
00135         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00136     }
00137 
00138     <span class="comment">/*!***************************************************************************</span>
00139 <span class="comment">        @Function           -</span>
00140 <span class="comment">        @Input              rhs another Vec2</span>
<a name="l00141"></a><a class="code" href="structPVRTVec2.html#a8">00141</a> <span class="comment">        @Returns            result of negation</span>
00142 <span class="comment">        @Description        negation operator for a Vec2</span>
00143 <span class="comment">        ****************************************************************************/</span>
00144     <span class="keyword">friend</span> <a class="code" href="structPVRTVec2.html">PVRTVec2</a> <a class="code" href="structPVRTVec2.html#a6">operator- </a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; rhs) { <span class="keywordflow">return</span> <a class="code" href="structPVRTVec2.html#a0">PVRTVec2</a>(-rhs.<a class="code" href="structPVRTVec2.html#o0">x</a>, -rhs.<a class="code" href="structPVRTVec2.html#o1">y</a>); }
00145 
00146     <span class="comment">/*!***************************************************************************</span>
00147 <span class="comment">        @Function           *</span>
00148 <span class="comment">        @Input              lhs scalar</span>
00149 <span class="comment">        @Input              rhs a Vec2</span>
00150 <span class="comment">        @Returns            result of multiplication</span>
00151 <span class="comment">        @Description        multiplication operator for a Vec2</span>
00152 <span class="comment">        ****************************************************************************/</span>
00153     <span class="keyword">friend</span> <a class="code" href="structPVRTVec2.html">PVRTVec2</a> <a class="code" href="structPVRTVec2.html#n1">operator*</a>(<span class="keyword">const</span> VERTTYPE lhs, <span class="keyword">const</span> <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp;  rhs)
00154     {
<a name="l00155"></a><a class="code" href="structPVRTVec2.html#n0">00155</a>         <a class="code" href="structPVRTVec2.html">PVRTVec2</a> out(lhs);
00156         <span class="keywordflow">return</span> out *= rhs;
00157     }
00158 
00159     <span class="comment">/*!***************************************************************************</span>
00160 <span class="comment">        @Function           /</span>
00161 <span class="comment">        @Input              lhs scalar</span>
00162 <span class="comment">        @Input              rhs a Vec2</span>
00163 <span class="comment">        @Returns            result of division</span>
00164 <span class="comment">        @Description        division operator for scalar and Vec2</span>
<a name="l00165"></a><a class="code" href="structPVRTVec2.html#n1">00165</a> <span class="comment">        ****************************************************************************/</span>
00166     <span class="keyword">friend</span> <a class="code" href="structPVRTVec2.html">PVRTVec2</a> <a class="code" href="structPVRTVec2.html#n2">operator/</a>(<span class="keyword">const</span> VERTTYPE lhs, <span class="keyword">const</span> <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp;  rhs)
00167     {
00168         <a class="code" href="structPVRTVec2.html">PVRTVec2</a> out(lhs);
00169         <span class="keywordflow">return</span> out /= rhs;
00170     }
00171 
00172     <span class="comment">/*!***************************************************************************</span>
00173 <span class="comment">        @Function           *</span>
00174 <span class="comment">        @Input              rhs a scalar</span>
00175 <span class="comment">        @Returns            result of multiplication</span>
00176 <span class="comment">        @Description        componentwise multiplication by scalar for Vec2</span>
00177 <span class="comment">        ****************************************************************************/</span>
00178     <a class="code" href="structPVRTVec2.html">PVRTVec2</a> <a class="code" href="structPVRTVec2.html#n1">operator*</a>(<span class="keyword">const</span> VERTTYPE&amp; rhs)<span class="keyword"> const</span>
<a name="l00179"></a><a class="code" href="structPVRTVec2.html#n2">00179</a> <span class="keyword">    </span>{
00180         <a class="code" href="structPVRTVec2.html">PVRTVec2</a> out(*<span class="keyword">this</span>);
00181         <span class="keywordflow">return</span> out *= rhs;
00182     }
00183 
00184     <span class="comment">/*!***************************************************************************</span>
00185 <span class="comment">        @Function           *=</span>
00186 <span class="comment">        @Input              rhs a scalar</span>
00187 <span class="comment">        @Returns            result of multiplication and assignment</span>
00188 <span class="comment">        @Description        componentwise multiplication and assignment by scalar for Vec2</span>
00189 <span class="comment">        ****************************************************************************/</span>
00190     <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; <a class="code" href="structPVRTVec2.html#a10">operator*=</a>(<span class="keyword">const</span> VERTTYPE&amp; rhs)
00191     {
<a name="l00192"></a><a class="code" href="structPVRTVec2.html#a9">00192</a>         x = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(x, rhs);
00193         y = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(y, rhs);
00194         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00195     }
00196 
00197     <span class="comment">/*!***************************************************************************</span>
00198 <span class="comment">        @Function           *=</span>
00199 <span class="comment">        @Input              rhs a Vec2</span>
00200 <span class="comment">        @Returns            result of multiplication and assignment</span>
00201 <span class="comment">        @Description        componentwise multiplication and assignment by Vec2 for Vec2</span>
00202 <span class="comment">        ****************************************************************************/</span>
00203     <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; <a class="code" href="structPVRTVec2.html#a10">operator*=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; rhs)
00204     {
<a name="l00205"></a><a class="code" href="structPVRTVec2.html#a10">00205</a>         x = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(x, rhs.<a class="code" href="structPVRTVec2.html#o0">x</a>);
00206         y = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(y, rhs.<a class="code" href="structPVRTVec2.html#o1">y</a>);
00207         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00208     }
00209 
00210     <span class="comment">/*!***************************************************************************</span>
00211 <span class="comment">        @Function           /</span>
00212 <span class="comment">        @Input              rhs a scalar</span>
00213 <span class="comment">        @Returns            result of division</span>
00214 <span class="comment">        @Description        componentwise division by scalar for Vec2</span>
00215 <span class="comment">        ****************************************************************************/</span>
00216     <a class="code" href="structPVRTVec2.html">PVRTVec2</a> <a class="code" href="structPVRTVec2.html#n2">operator/</a>(<span class="keyword">const</span> VERTTYPE&amp; rhs)<span class="keyword"> const</span>
00217 <span class="keyword">    </span>{
00218         <a class="code" href="structPVRTVec2.html">PVRTVec2</a> out(*<span class="keyword">this</span>);
<a name="l00219"></a><a class="code" href="structPVRTVec2.html#a11">00219</a>         <span class="keywordflow">return</span> out /= rhs;
00220     }
00221 
00222     <span class="comment">/*!***************************************************************************</span>
00223 <span class="comment">        @Function           /=</span>
00224 <span class="comment">        @Input              rhs a scalar</span>
00225 <span class="comment">        @Returns            result of division and assignment</span>
00226 <span class="comment">        @Description        componentwise division and assignment by scalar for Vec2</span>
00227 <span class="comment">        ****************************************************************************/</span>
00228     <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; <a class="code" href="structPVRTVec2.html#a13">operator/=</a>(<span class="keyword">const</span> VERTTYPE&amp; rhs)
00229     {
00230         x = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(x, rhs);
00231         y = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(y, rhs);
00232         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00233"></a><a class="code" href="structPVRTVec2.html#a12">00233</a>     }
00234 
00235     <span class="comment">/*!***************************************************************************</span>
00236 <span class="comment">        @Function           /=</span>
00237 <span class="comment">        @Input              rhs a Vec2</span>
00238 <span class="comment">        @Returns            result of division and assignment</span>
00239 <span class="comment">        @Description        componentwise division and assignment by Vec2 for Vec2</span>
00240 <span class="comment">        ****************************************************************************/</span>
00241     <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; <a class="code" href="structPVRTVec2.html#a13">operator/=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; rhs)
00242     {
00243         x = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(x, rhs.<a class="code" href="structPVRTVec2.html#o0">x</a>);
00244         y = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(y, rhs.<a class="code" href="structPVRTVec2.html#o1">y</a>);
00245         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00246"></a><a class="code" href="structPVRTVec2.html#a13">00246</a>     }
00247 
00248     <span class="comment">/*!***************************************************************************</span>
00249 <span class="comment">    @Function           ==</span>
00250 <span class="comment">    @Input              rhs a single value</span>
00251 <span class="comment">    @Returns            true if the two vectors are equal</span>
00252 <span class="comment">    @Description        PVRTVec2 equality operator</span>
00253 <span class="comment">    ****************************************************************************/</span>
00254     <span class="keywordtype">bool</span> <a class="code" href="structPVRTVec2.html#a15">operator==</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; rhs)<span class="keyword"> const</span>
00255 <span class="keyword">    </span>{
00256         <span class="keywordflow">if</span>(x != rhs.<a class="code" href="structPVRTVec2.html#o0">x</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
00257         <span class="keywordflow">if</span>(y != rhs.<a class="code" href="structPVRTVec2.html#o1">y</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
00258         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00259     }
<a name="l00260"></a><a class="code" href="structPVRTVec2.html#a14">00260</a> 
00261     <span class="comment">/*!***************************************************************************</span>
00262 <span class="comment">    @Function           !=</span>
00263 <span class="comment">    @Input              rhs a single value</span>
00264 <span class="comment">    @Returns            true if the two vectors are not equal</span>
00265 <span class="comment">    @Description        PVRTVec2 inequality operator</span>
00266 <span class="comment">    ****************************************************************************/</span>
00267     <span class="keywordtype">bool</span> <a class="code" href="structPVRTVec2.html#a16">operator!=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; rhs)<span class="keyword"> const</span>
00268 <span class="keyword">    </span>{
00269         <span class="keywordflow">if</span>(x == rhs.<a class="code" href="structPVRTVec2.html#o0">x</a>)
00270             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00271 
00272         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00273     }
<a name="l00274"></a><a class="code" href="structPVRTVec2.html#a15">00274</a> 
00275     <span class="comment">// FUNCTIONS</span>
00276     <span class="comment">/*!***************************************************************************</span>
00277 <span class="comment">        @Function           lenSqr</span>
00278 <span class="comment">        @Returns            the square of the magnitude of the vector</span>
00279 <span class="comment">        @Description        calculates the square of the magnitude of the vector</span>
00280 <span class="comment">        ****************************************************************************/</span>
00281     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <a class="code" href="structPVRTVec2.html#a17">lenSqr</a>()<span class="keyword"> const</span>
00282 <span class="keyword">    </span>{
00283         <span class="keywordflow">return</span> <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(x,x)+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(y,y);
00284     }
00285 
00286     <span class="comment">/*!***************************************************************************</span>
00287 <span class="comment">        @Function           length</span>
<a name="l00288"></a><a class="code" href="structPVRTVec2.html#a16">00288</a> <span class="comment">        @Returns            the of the magnitude of the vector</span>
00289 <span class="comment">        @Description        calculates the magnitude of the vector</span>
00290 <span class="comment">        ****************************************************************************/</span>
00291     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <a class="code" href="structPVRTVec2.html#a18">length</a>()<span class="keyword"> const</span>
00292 <span class="keyword">    </span>{
00293         <span class="keywordflow">return</span> (<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>) <a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(sqrt(<a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(x)*<a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(x) + <a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(y)*<a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(y)));
00294     }
00295 
00296     <span class="comment">/*!***************************************************************************</span>
00297 <span class="comment">        @Function           normalize</span>
00298 <span class="comment">        @Returns            the normalized value of the vector</span>
00299 <span class="comment">        @Description        normalizes the vector</span>
00300 <span class="comment">        ****************************************************************************/</span>
00301     <a class="code" href="structPVRTVec2.html">PVRTVec2</a> <a class="code" href="structPVRTVec2.html#a19">normalize</a>()
00302     {
<a name="l00303"></a><a class="code" href="structPVRTVec2.html#a17">00303</a>         <span class="keywordflow">return</span> *<span class="keyword">this</span> /= <a class="code" href="structPVRTVec2.html#a18">length</a>();
00304     }
00305 
00306     <span class="comment">/*!***************************************************************************</span>
00307 <span class="comment">        @Function           normalized</span>
00308 <span class="comment">        @Returns            returns the normalized value of the vector</span>
00309 <span class="comment">        @Description        returns a normalized vector of the same direction as this</span>
00310 <span class="comment">        vector</span>
00311 <span class="comment">        ****************************************************************************/</span>
00312     <a class="code" href="structPVRTVec2.html">PVRTVec2</a> <a class="code" href="structPVRTVec2.html#a20">normalized</a>()<span class="keyword"> const</span>
00313 <span class="keyword">    </span>{
<a name="l00314"></a><a class="code" href="structPVRTVec2.html#a18">00314</a>         <a class="code" href="structPVRTVec2.html">PVRTVec2</a> out(*<span class="keyword">this</span>);
00315         <span class="keywordflow">return</span> out.<a class="code" href="structPVRTVec2.html#a19">normalize</a>();
00316     }
00317 
00318     <span class="comment">/*!***************************************************************************</span>
00319 <span class="comment">        @Function           rotated90</span>
00320 <span class="comment">        @Returns            returns the vector rotated 90°</span>
00321 <span class="comment">        @Description        returns the vector rotated 90°</span>
00322 <span class="comment">        ****************************************************************************/</span>
00323     <a class="code" href="structPVRTVec2.html">PVRTVec2</a> <a class="code" href="structPVRTVec2.html#a21">rotated90</a>()<span class="keyword"> const</span>
00324 <span class="keyword">    </span>{
<a name="l00325"></a><a class="code" href="structPVRTVec2.html#a19">00325</a>         <span class="keywordflow">return</span> <a class="code" href="structPVRTVec2.html#a0">PVRTVec2</a>(-y, x);
00326     }
00327 
00328     <span class="comment">/*!***************************************************************************</span>
00329 <span class="comment">        @Function           dot</span>
00330 <span class="comment">        @Input              rhs a single value</span>
00331 <span class="comment">        @Returns            scalar product</span>
00332 <span class="comment">        @Description        calculate the scalar product of two Vec3s</span>
00333 <span class="comment">        ****************************************************************************/</span>
00334     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <a class="code" href="structPVRTVec2.html#a22">dot</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec2.html">PVRTVec2</a>&amp; rhs)
00335     {
00336         <span class="keywordflow">return</span> <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(x, rhs.<a class="code" href="structPVRTVec2.html#o0">x</a>) + <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(y, rhs.<a class="code" href="structPVRTVec2.html#o1">y</a>);
<a name="l00337"></a><a class="code" href="structPVRTVec2.html#a20">00337</a>     }
00338 
00339     <span class="comment">/*!***************************************************************************</span>
00340 <span class="comment">        @Function           ptr</span>
00341 <span class="comment">        @Returns            pointer</span>
00342 <span class="comment">        @Description        returns a pointer to memory containing the values of the</span>
00343 <span class="comment">        Vec3</span>
00344 <span class="comment">        ****************************************************************************/</span>
00345     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> *<a class="code" href="structPVRTVec2.html#a23">ptr</a>() { <span class="keywordflow">return</span> (<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>*)<span class="keyword">this</span>; }
00346 };
00347 
00348 <span class="comment">/*!***************************************************************************</span>
<a name="l00349"></a><a class="code" href="structPVRTVec2.html#a21">00349</a> <span class="comment">** PVRTVec3 3 component vector</span>
00350 <span class="comment">****************************************************************************/</span>
00351 <span class="keyword">struct </span><a class="code" href="structPVRTVec3.html">PVRTVec3</a> : <span class="keyword">public</span> <a class="code" href="structPVRTVECTOR3f.html">PVRTVECTOR3</a>
00352 {
00353 <span class="comment">/*!***************************************************************************</span>
00354 <span class="comment">** Constructors</span>
00355 <span class="comment">****************************************************************************/</span>
00356 <span class="comment">/*!***************************************************************************</span>
00357 <span class="comment"> @Function          PVRTVec3</span>
00358 <span class="comment"> @Description       Blank constructor.</span>
00359 <span class="comment">*****************************************************************************/</span>
00360     <a class="code" href="structPVRTVec3.html#a0">PVRTVec3</a>(){}
<a name="l00361"></a><a class="code" href="structPVRTVec2.html#a22">00361</a> <span class="comment">/*!***************************************************************************</span>
00362 <span class="comment"> @Function          PVRTVec3</span>
00363 <span class="comment"> @Input             fX  X component of vector</span>
00364 <span class="comment"> @Input             fY  Y component of vector</span>
00365 <span class="comment"> @Input             fZ  Z component of vector</span>
00366 <span class="comment"> @Description       Simple constructor from 3 values.</span>
00367 <span class="comment">*****************************************************************************/</span>
00368     <a class="code" href="structPVRTVec3.html#a0">PVRTVec3</a>(VERTTYPE fX, VERTTYPE fY, VERTTYPE fZ)
00369     {
00370         x = fX; y = fY; z = fZ;
00371     }
00372 <span class="comment">/*!***************************************************************************</span>
<a name="l00373"></a><a class="code" href="structPVRTVec2.html#a23">00373</a> <span class="comment"> @Function          PVRTVec3</span>
00374 <span class="comment"> @Input             fValue  a component value</span>
00375 <span class="comment"> @Description       Constructor from a single value.</span>
00376 <span class="comment">*****************************************************************************/</span>
00377     <a class="code" href="structPVRTVec3.html#a0">PVRTVec3</a>(<span class="keyword">const</span> VERTTYPE fValue)
00378     {
<a name="l00379"></a><a class="code" href="structPVRTVec3.html">00379</a>         x = fValue; y = fValue; z = fValue;
00380     }
00381 <span class="comment">/*!***************************************************************************</span>
00382 <span class="comment"> @Function          PVRTVec3</span>
00383 <span class="comment"> @Input             pVec    an array</span>
00384 <span class="comment"> @Description       Constructor from an array</span>
00385 <span class="comment">*****************************************************************************/</span>
00386     <a class="code" href="structPVRTVec3.html#a0">PVRTVec3</a>(<span class="keyword">const</span> VERTTYPE* pVec)
00387     {
00388         x = (*pVec++); y = (*pVec++); z = *pVec;
<a name="l00389"></a><a class="code" href="structPVRTVec3.html#a0">00389</a>     }
00390 <span class="comment">/*!***************************************************************************</span>
00391 <span class="comment"> @Function          PVRTVec3</span>
00392 <span class="comment"> @Input             v4Vec a PVRTVec4</span>
00393 <span class="comment"> @Description       Constructor from a PVRTVec4</span>
00394 <span class="comment">*****************************************************************************/</span>
00395     <a class="code" href="structPVRTVec3.html#a0">PVRTVec3</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec4.html">PVRTVec4</a>&amp; v4Vec);
00396 <span class="comment">/*!***************************************************************************</span>
00397 <span class="comment">** Operators</span>
<a name="l00398"></a><a class="code" href="structPVRTVec3.html#a1">00398</a> <span class="comment">****************************************************************************/</span>
00399 <span class="comment">/*!***************************************************************************</span>
00400 <span class="comment"> @Function          +</span>
00401 <span class="comment"> @Input             rhs another PVRTVec3</span>
00402 <span class="comment"> @Returns           result of addition</span>
00403 <span class="comment"> @Description       componentwise addition operator for two PVRTVec3s</span>
00404 <span class="comment">*****************************************************************************/</span>
00405     <a class="code" href="structPVRTVec3.html">PVRTVec3</a> <a class="code" href="structPVRTVec3.html#a5">operator+</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; rhs)<span class="keyword"> const</span>
00406 <span class="keyword">    </span>{
00407         <a class="code" href="structPVRTVec3.html">PVRTVec3</a> out;
<a name="l00408"></a><a class="code" href="structPVRTVec3.html#a2">00408</a>         out.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a> = x+rhs.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>;
00409         out.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a> = y+rhs.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>;
00410         out.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a> = z+rhs.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>;
00411         <span class="keywordflow">return</span> out;
00412     }
00413 <span class="comment">/*!***************************************************************************</span>
00414 <span class="comment"> @Function          -</span>
00415 <span class="comment"> @Input             rhs another PVRTVec3</span>
00416 <span class="comment"> @Returns           result of subtraction</span>
00417 <span class="comment"> @Description       componentwise subtraction operator for two PVRTVec3s</span>
<a name="l00418"></a><a class="code" href="structPVRTVec3.html#a3">00418</a> <span class="comment">****************************************************************************/</span>
00419     <a class="code" href="structPVRTVec3.html">PVRTVec3</a> <a class="code" href="structPVRTVec3.html#a6">operator-</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; rhs)<span class="keyword"> const</span>
00420 <span class="keyword">    </span>{
00421         <a class="code" href="structPVRTVec3.html">PVRTVec3</a> out;
00422         out.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a> = x-rhs.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>;
00423         out.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a> = y-rhs.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>;
00424         out.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a> = z-rhs.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>;
00425         <span class="keywordflow">return</span> out;
00426     }
00427 
00428 <span class="comment">/*!***************************************************************************</span>
00429 <span class="comment"> @Function          +=</span>
00430 <span class="comment"> @Input             rhs another PVRTVec3</span>
00431 <span class="comment"> @Returns           result of addition</span>
00432 <span class="comment"> @Description       componentwise addition and assignement operator for two PVRTVec3s</span>
00433 <span class="comment">****************************************************************************/</span>
00434     <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; <a class="code" href="structPVRTVec3.html#a7">operator+=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; rhs)
00435     {
00436         x +=rhs.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>;
00437         y +=rhs.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>;
00438         z +=rhs.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>;
<a name="l00439"></a><a class="code" href="structPVRTVec3.html#a5">00439</a>         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00440     }
00441 
00442 <span class="comment">/*!***************************************************************************</span>
00443 <span class="comment"> @Function          -=</span>
00444 <span class="comment"> @Input             rhs another PVRTVec3</span>
00445 <span class="comment"> @Returns           result of subtraction</span>
00446 <span class="comment"> @Description       componentwise subtraction and assignement operator for two PVRTVec3s</span>
00447 <span class="comment">****************************************************************************/</span>
00448     <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; <a class="code" href="structPVRTVec3.html#a8">operator-=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; rhs)
00449     {
00450         x -=rhs.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>;
00451         y -=rhs.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>;
00452         z -=rhs.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>;
00453         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00454"></a><a class="code" href="structPVRTVec3.html#a6">00454</a>     }
00455 
00456 <span class="comment">/*!***************************************************************************</span>
00457 <span class="comment"> @Function          -</span>
00458 <span class="comment"> @Input             rhs another PVRTVec3</span>
00459 <span class="comment"> @Returns           result of negation</span>
00460 <span class="comment"> @Description       negation operator for a PVRTVec3</span>
00461 <span class="comment">****************************************************************************/</span>
00462     <span class="keyword">friend</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a> <a class="code" href="structPVRTVec3.html#a6">operator - </a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; rhs) { <span class="keywordflow">return</span> <a class="code" href="structPVRTVec3.html#a0">PVRTVec3</a>(rhs) *= <a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(-1); }
00463 
00464 <span class="comment">/*!***************************************************************************</span>
00465 <span class="comment"> @Function          *</span>
00466 <span class="comment"> @Input             lhs single value</span>
00467 <span class="comment"> @Input             rhs a PVRTVec3</span>
00468 <span class="comment"> @Returns           result of multiplication</span>
00469 <span class="comment"> @Description       multiplication operator for a PVRTVec3</span>
<a name="l00470"></a><a class="code" href="structPVRTVec3.html#a7">00470</a> <span class="comment">****************************************************************************/</span>
00471     <span class="keyword">friend</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a> <a class="code" href="structPVRTVec3.html#n1">operator*</a>(<span class="keyword">const</span> VERTTYPE lhs, <span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp;  rhs)
00472     {
00473         <a class="code" href="structPVRTVec3.html">PVRTVec3</a> out;
00474         out.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(lhs,rhs.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>);
00475         out.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(lhs,rhs.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>);
00476         out.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(lhs,rhs.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>);
00477         <span class="keywordflow">return</span> out;
00478     }
00479 
00480 <span class="comment">/*!***************************************************************************</span>
00481 <span class="comment"> @Function          *</span>
00482 <span class="comment"> @Input             lhs single value</span>
00483 <span class="comment"> @Input             rhs a PVRTVec3</span>
00484 <span class="comment"> @Returns           result of negation</span>
<a name="l00485"></a><a class="code" href="structPVRTVec3.html#a8">00485</a> <span class="comment"> @Description       negation operator for a PVRTVec3</span>
00486 <span class="comment">****************************************************************************/</span>
00487     <span class="keyword">friend</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a> <a class="code" href="structPVRTVec3.html#n2">operator/</a>(<span class="keyword">const</span> VERTTYPE lhs, <span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp;  rhs)
00488     {
00489         <a class="code" href="structPVRTVec3.html">PVRTVec3</a> out;
00490         out.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a> = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(lhs,rhs.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>);
00491         out.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a> = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(lhs,rhs.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>);
00492         out.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a> = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(lhs,rhs.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>);
00493         <span class="keywordflow">return</span> out;
00494     }
00495 
00496 <span class="comment">/*!***************************************************************************</span>
00497 <span class="comment"> @Function          *</span>
00498 <span class="comment"> @Input             rhs a PVRTMat3</span>
00499 <span class="comment"> @Returns           result of multiplication</span>
<a name="l00500"></a><a class="code" href="structPVRTVec3.html#n0">00500</a> <span class="comment"> @Description       matrix multiplication operator PVRTVec3 and PVRTMat3</span>
00501 <span class="comment">****************************************************************************/</span>
00502     <a class="code" href="structPVRTVec3.html">PVRTVec3</a> <a class="code" href="structPVRTVec3.html#n1">operator*</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat3.html">PVRTMat3</a>&amp; rhs) <span class="keyword">const</span>;
00503 
00504 <span class="comment">/*!***************************************************************************</span>
00505 <span class="comment"> @Function          *=</span>
00506 <span class="comment"> @Input             rhs a PVRTMat3</span>
00507 <span class="comment"> @Returns           result of multiplication and assignment</span>
00508 <span class="comment"> @Description       matrix multiplication and assignment operator for PVRTVec3 and PVRTMat3</span>
00509 <span class="comment">****************************************************************************/</span>
<a name="l00510"></a><a class="code" href="structPVRTVec3.html#n1">00510</a>     <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; <a class="code" href="structPVRTVec3.html#a10">operator*=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat3.html">PVRTMat3</a>&amp; rhs);
00511 
00512 <span class="comment">/*!***************************************************************************</span>
00513 <span class="comment"> @Function          *</span>
00514 <span class="comment"> @Input             rhs a single value</span>
00515 <span class="comment"> @Returns           result of multiplication</span>
00516 <span class="comment"> @Description       componentwise multiplication by single dimension value for PVRTVec3</span>
00517 <span class="comment">****************************************************************************/</span>
00518     <a class="code" href="structPVRTVec3.html">PVRTVec3</a> <a class="code" href="structPVRTVec3.html#n1">operator*</a>(<span class="keyword">const</span> VERTTYPE&amp; rhs)<span class="keyword"> const</span>
00519 <span class="keyword">    </span>{
00520         <a class="code" href="structPVRTVec3.html">PVRTVec3</a> out;
00521         out.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(x,rhs);
00522         out.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(y,rhs);
00523         out.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(z,rhs);
00524         <span class="keywordflow">return</span> out;
00525     }
00526 
<a name="l00527"></a><a class="code" href="structPVRTVec3.html#n2">00527</a> <span class="comment">/*!***************************************************************************</span>
00528 <span class="comment"> @Function          *</span>
00529 <span class="comment"> @Input             rhs a single value</span>
00530 <span class="comment"> @Returns           result of multiplication and assignment</span>
00531 <span class="comment"> @Description       componentwise multiplication and assignement by single</span>
00532 <span class="comment">                    dimension value for PVRTVec3</span>
00533 <span class="comment">****************************************************************************/</span>
00534     <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; <a class="code" href="structPVRTVec3.html#a10">operator*=</a>(<span class="keyword">const</span> VERTTYPE&amp; rhs)
00535     {
00536         x = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(x,rhs);
00537         y = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(y,rhs);
00538         z = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(z,rhs);
00539         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00540     }
00541 
00542 <span class="comment">/*!***************************************************************************</span>
00543 <span class="comment"> @Function          /</span>
00544 <span class="comment"> @Input             rhs a single value</span>
00545 <span class="comment"> @Returns           result of division</span>
00546 <span class="comment"> @Description       componentwise division by single</span>
00547 <span class="comment">                    dimension value for PVRTVec3</span>
00548 <span class="comment">****************************************************************************/</span>
00549     <a class="code" href="structPVRTVec3.html">PVRTVec3</a> <a class="code" href="structPVRTVec3.html#n2">operator/</a>(<span class="keyword">const</span> VERTTYPE&amp; rhs)<span class="keyword"> const</span>
00550 <span class="keyword">    </span>{
00551         <a class="code" href="structPVRTVec3.html">PVRTVec3</a> out;
00552         out.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a> = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(x,rhs);
00553         out.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a> = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(y,rhs);
00554         out.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a> = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(z,rhs);
00555         <span class="keywordflow">return</span> out;
00556     }
00557 
00558 <span class="comment">/*!***************************************************************************</span>
00559 <span class="comment"> @Function          /=</span>
00560 <span class="comment"> @Input             rhs a single value</span>
<a name="l00561"></a><a class="code" href="structPVRTVec3.html#a11">00561</a> <span class="comment"> @Returns           result of division and assignment</span>
00562 <span class="comment"> @Description       componentwise division and assignement by single</span>
00563 <span class="comment">                    dimension value for PVRTVec3</span>
00564 <span class="comment">****************************************************************************/</span>
00565     <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; <a class="code" href="structPVRTVec3.html#a14">operator/=</a>(<span class="keyword">const</span> VERTTYPE&amp; rhs)
00566     {
00567         x = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(x,rhs);
00568         y = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(y,rhs);
00569         z = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(z,rhs);
00570         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00571     }
00572 
00573 <span class="comment">/*!***************************************************************************</span>
00574 <span class="comment"> @Function          ==</span>
00575 <span class="comment"> @Input             rhs a single value</span>
00576 <span class="comment"> @Returns           true if the two vectors are equal</span>
00577 <span class="comment"> @Description       PVRTVec3 equality operator</span>
<a name="l00578"></a><a class="code" href="structPVRTVec3.html#a12">00578</a> <span class="comment">****************************************************************************/</span>
00579     <span class="keywordtype">bool</span> <a class="code" href="structPVRTVec3.html#a15">operator==</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; rhs)<span class="keyword"> const</span>
00580 <span class="keyword">    </span>{
00581         <span class="keywordflow">if</span>(x != rhs.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
00582         <span class="keywordflow">if</span>(y != rhs.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
00583         <span class="keywordflow">if</span>(z != rhs.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
00584         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00585     }
00586 
00587 <span class="comment">/*!***************************************************************************</span>
00588 <span class="comment">@Function           !=</span>
00589 <span class="comment">@Input              rhs a single value</span>
00590 <span class="comment">@Returns            true if the two vectors are not equal</span>
00591 <span class="comment">@Description        PVRTVec3 inequality operator</span>
00592 <span class="comment">    ****************************************************************************/</span>
00593     <span class="keywordtype">bool</span> <a class="code" href="structPVRTVec3.html#a16">operator!=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; rhs)<span class="keyword"> const</span>
<a name="l00594"></a><a class="code" href="structPVRTVec3.html#a13">00594</a> <span class="keyword">    </span>{
00595         <span class="keywordflow">if</span>(x == rhs.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>)
00596             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00597 
00598         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00599     }
00600     <span class="comment">// FUNCTIONS</span>
00601 <span class="comment">/*!***************************************************************************</span>
00602 <span class="comment"> @Function          lenSqr</span>
00603 <span class="comment"> @Returns           the square of the magnitude of the vector</span>
00604 <span class="comment"> @Description       calculates the square of the magnitude of the vector</span>
00605 <span class="comment">****************************************************************************/</span>
00606     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <a class="code" href="structPVRTVec3.html#a17">lenSqr</a>()<span class="keyword"> const</span>
00607 <span class="keyword">    </span>{
00608         <span class="keywordflow">return</span> <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(x,x)+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(y,y)+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(z,z);
00609     }
00610 
<a name="l00611"></a><a class="code" href="structPVRTVec3.html#a14">00611</a> <span class="comment">/*!***************************************************************************</span>
00612 <span class="comment"> @Function          length</span>
00613 <span class="comment"> @Returns           the of the magnitude of the vector</span>
00614 <span class="comment"> @Description       calculates the magnitude of the vector</span>
00615 <span class="comment">****************************************************************************/</span>
00616     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <a class="code" href="structPVRTVec3.html#a18">length</a>()<span class="keyword"> const</span>
00617 <span class="keyword">    </span>{
00618         <span class="keywordflow">return</span> (<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>) <a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(sqrt(<a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(x)*<a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(x) + <a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(y)*<a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(y) + <a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(z)*<a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(z)));
00619     }
00620 
00621 <span class="comment">/*!***************************************************************************</span>
00622 <span class="comment"> @Function          normalize</span>
00623 <span class="comment"> @Returns           the normalized value of the vector</span>
00624 <span class="comment"> @Description       normalizes the vector</span>
00625 <span class="comment">****************************************************************************/</span>
<a name="l00626"></a><a class="code" href="structPVRTVec3.html#a15">00626</a>     <a class="code" href="structPVRTVec3.html">PVRTVec3</a> <a class="code" href="structPVRTVec3.html#a19">normalize</a>()
00627     {
00628 <span class="preprocessor">#if defined(PVRT_FIXED_POINT_ENABLE)</span>
00629 <span class="preprocessor"></span>        <span class="comment">// Scale vector by uniform value</span>
00630         <span class="keywordtype">int</span> n = <a class="code" href="PVRTFixedPoint_8h.html#a5">PVRTABS</a>(x) + <a class="code" href="PVRTFixedPoint_8h.html#a5">PVRTABS</a>(y) + <a class="code" href="PVRTFixedPoint_8h.html#a5">PVRTABS</a>(z);
00631         x = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(x, n);
00632         y = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(y, n);
00633         z = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(z, n);
00634 
00635         <span class="comment">// Calculate x2+y2+z2/sqrt(x2+y2+z2)</span>
00636         <span class="keywordtype">int</span> f = <a class="code" href="structPVRTVec3.html#a21">dot</a>(*<span class="keyword">this</span>);
00637         f = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(<a class="code" href="PVRTFixedPoint_8h.html#a1">PVRTF2X</a>(1.0f), <a class="code" href="PVRTFixedPoint_8h.html#a1">PVRTF2X</a>(sqrt(<a class="code" href="PVRTFixedPoint_8h.html#a2">PVRTX2F</a>(f))));
00638 
00639         <span class="comment">// Multiply vector components by f</span>
00640         x = <a class="code" href="PVRTFixedPoint_8h.html#a3">PVRTXMUL</a>(x, f);
<a name="l00641"></a><a class="code" href="structPVRTVec3.html#a16">00641</a>         y = <a class="code" href="PVRTFixedPoint_8h.html#a3">PVRTXMUL</a>(y, f);
00642         z = <a class="code" href="PVRTFixedPoint_8h.html#a3">PVRTXMUL</a>(z, f);
00643 <span class="preprocessor">#else</span>
00644 <span class="preprocessor"></span>        <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> len = <a class="code" href="structPVRTVec3.html#a18">length</a>();
00645         x =<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(x,len);
00646         y =<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(y,len);
00647         z =<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(z,len);
00648 <span class="preprocessor">#endif</span>
00649 <span class="preprocessor"></span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00650     }
00651 
00652 <span class="comment">/*!***************************************************************************</span>
00653 <span class="comment"> @Function          normalized</span>
00654 <span class="comment"> @Returns           returns the normalized value of the vector</span>
<a name="l00655"></a><a class="code" href="structPVRTVec3.html#a17">00655</a> <span class="comment"> @Description       returns a normalized vector of the same direction as this</span>
00656 <span class="comment">                    vector</span>
00657 <span class="comment">****************************************************************************/</span>
00658     <a class="code" href="structPVRTVec3.html">PVRTVec3</a> <a class="code" href="structPVRTVec3.html#a20">normalized</a>()<span class="keyword"> const</span>
00659 <span class="keyword">    </span>{
00660         <a class="code" href="structPVRTVec3.html">PVRTVec3</a> out;
00661 <span class="preprocessor">#if defined(PVRT_FIXED_POINT_ENABLE)</span>
00662 <span class="preprocessor"></span>        <span class="comment">// Scale vector by uniform value</span>
00663         <span class="keywordtype">int</span> n = <a class="code" href="PVRTFixedPoint_8h.html#a5">PVRTABS</a>(x) + <a class="code" href="PVRTFixedPoint_8h.html#a5">PVRTABS</a>(y) + <a class="code" href="PVRTFixedPoint_8h.html#a5">PVRTABS</a>(z);
00664         out.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a> = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(x, n);
00665         out.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a> = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(y, n);
<a name="l00666"></a><a class="code" href="structPVRTVec3.html#a18">00666</a>         out.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a> = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(z, n);
00667 
00668         <span class="comment">// Calculate x2+y2+z2/sqrt(x2+y2+z2)</span>
00669         <span class="keywordtype">int</span> f = out.<a class="code" href="structPVRTVec3.html#a21">dot</a>(out);
00670         f = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(<a class="code" href="PVRTFixedPoint_8h.html#a1">PVRTF2X</a>(1.0f), <a class="code" href="PVRTFixedPoint_8h.html#a1">PVRTF2X</a>(sqrt(<a class="code" href="PVRTFixedPoint_8h.html#a2">PVRTX2F</a>(f))));
00671 
00672         <span class="comment">// Multiply vector components by f</span>
00673         out.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a> = <a class="code" href="PVRTFixedPoint_8h.html#a3">PVRTXMUL</a>(out.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>, f);
00674         out.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a> = <a class="code" href="PVRTFixedPoint_8h.html#a3">PVRTXMUL</a>(out.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>, f);
00675         out.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a> = <a class="code" href="PVRTFixedPoint_8h.html#a3">PVRTXMUL</a>(out.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>, f);
00676 <span class="preprocessor">#else</span>
<a name="l00677"></a><a class="code" href="structPVRTVec3.html#a19">00677</a> <span class="preprocessor"></span>        <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> len = <a class="code" href="structPVRTVec3.html#a18">length</a>();
00678         out.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a> =<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(x,len);
00679         out.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a> =<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(y,len);
00680         out.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a> =<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(z,len);
00681 <span class="preprocessor">#endif</span>
00682 <span class="preprocessor"></span>        <span class="keywordflow">return</span> out;
00683     }
00684 
00685 <span class="comment">/*!***************************************************************************</span>
00686 <span class="comment"> @Function          dot</span>
00687 <span class="comment"> @Input             rhs a single value</span>
00688 <span class="comment"> @Returns           scalar product</span>
00689 <span class="comment"> @Description       calculate the scalar product of two PVRTVec3s</span>
00690 <span class="comment">****************************************************************************/</span>
00691     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <a class="code" href="structPVRTVec3.html#a21">dot</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; rhs)
00692     {
00693         <span class="keywordflow">return</span> <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(x,rhs.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>)+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(y,rhs.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>)+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(z,rhs.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>);
00694     }
00695 
00696 <span class="comment">/*!***************************************************************************</span>
00697 <span class="comment"> @Function          cross</span>
00698 <span class="comment"> @Returns           returns three-dimensional vector</span>
00699 <span class="comment"> @Description       calculate the cross product of two PVRTVec3s</span>
00700 <span class="comment">****************************************************************************/</span>
00701     <a class="code" href="structPVRTVec3.html">PVRTVec3</a> <a class="code" href="structPVRTVec3.html#a22">cross</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; rhs)
00702     {
00703         <a class="code" href="structPVRTVec3.html">PVRTVec3</a> out;
00704         out.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(y,rhs.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>)-<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(z,rhs.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>);
00705         out.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(z,rhs.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>)-<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(x,rhs.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>);
00706         out.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(x,rhs.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>)-<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(y,rhs.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>);
00707         <span class="keywordflow">return</span> out;
00708     }
00709 
<a name="l00710"></a><a class="code" href="structPVRTVec3.html#a20">00710</a> <span class="comment">/*!***************************************************************************</span>
00711 <span class="comment"> @Function          ptr</span>
00712 <span class="comment"> @Returns           pointer</span>
00713 <span class="comment"> @Description       returns a pointer to memory containing the values of the</span>
00714 <span class="comment">                    PVRTVec3</span>
00715 <span class="comment">****************************************************************************/</span>
00716     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> *<a class="code" href="structPVRTVec3.html#a23">ptr</a>() { <span class="keywordflow">return</span> (<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>*)<span class="keyword">this</span>; }
00717 };
00718 
00719 <span class="comment">/*!***************************************************************************</span>
00720 <span class="comment">** PVRTVec4 4 component vector</span>
00721 <span class="comment">****************************************************************************/</span>
00722 <span class="keyword">struct </span><a class="code" href="structPVRTVec4.html">PVRTVec4</a> : <span class="keyword">public</span> <a class="code" href="structPVRTVECTOR4f.html">PVRTVECTOR4</a>
00723 {
00724 <span class="comment">/*!***************************************************************************</span>
00725 <span class="comment">** Constructors</span>
00726 <span class="comment">****************************************************************************/</span>
00727 <span class="comment">/*!***************************************************************************</span>
00728 <span class="comment"> @Function          PVRTVec4</span>
00729 <span class="comment"> @Description       Blank constructor.</span>
00730 <span class="comment">*****************************************************************************/</span>
00731     <a class="code" href="structPVRTVec4.html#a0">PVRTVec4</a>(){}
00732 
00733 <span class="comment">/*!***************************************************************************</span>
00734 <span class="comment"> @Function          PVRTVec3</span>
00735 <span class="comment"> @Description       Blank constructor.</span>
00736 <span class="comment">*****************************************************************************/</span>
00737     <a class="code" href="structPVRTVec4.html#a0">PVRTVec4</a>(<span class="keyword">const</span> VERTTYPE vec)
00738     {
00739         <a class="code" href="structPVRTVECTOR4f.html#o0">x</a> = vec; <a class="code" href="structPVRTVECTOR4f.html#o1">y</a> = vec; <a class="code" href="structPVRTVECTOR4f.html#o2">z</a> = vec; <a class="code" href="structPVRTVECTOR4f.html#o3">w</a> = vec;
00740     }
00741 
00742 <span class="comment">/*!***************************************************************************</span>
00743 <span class="comment"> @Function          multiple value constructor</span>
<a name="l00744"></a><a class="code" href="structPVRTVec3.html#a21">00744</a> <span class="comment"> @Input             fX value of x component</span>
00745 <span class="comment"> @Input             fY value of y component</span>
00746 <span class="comment"> @Input             fZ value of z component</span>
00747 <span class="comment"> @Input             fW value of w component</span>
00748 <span class="comment"> @Description       Constructs a PVRTVec4 from 4 separate values</span>
00749 <span class="comment">****************************************************************************/</span>
00750     <a class="code" href="structPVRTVec4.html#a0">PVRTVec4</a>(VERTTYPE fX, VERTTYPE fY, VERTTYPE fZ, VERTTYPE fW)
00751     {
00752         x = fX; y = fY; z = fZ; w = fW;
00753     }
00754 
<a name="l00755"></a><a class="code" href="structPVRTVec3.html#a22">00755</a> <span class="comment">/*!***************************************************************************</span>
00756 <span class="comment"> @Function          constructor from PVRTVec3</span>
00757 <span class="comment"> @Input             vec3 a PVRTVec3</span>
00758 <span class="comment"> @Input             fW value of w component</span>
00759 <span class="comment"> @Description       Constructs a PVRTVec4 from a vec3 and a w component</span>
00760 <span class="comment">****************************************************************************/</span>
00761     <a class="code" href="structPVRTVec4.html#a0">PVRTVec4</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; vec3, VERTTYPE fW)
00762     {
00763         x = vec3.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>; y = vec3.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>; z = vec3.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>; w = fW;
00764     }
00765 
00766 <span class="comment">/*!***************************************************************************</span>
00767 <span class="comment"> @Function          constructor from PVRTVec3</span>
00768 <span class="comment"> @Input             fX value of x component</span>
00769 <span class="comment"> @Input             vec3 a PVRTVec3</span>
00770 <span class="comment"> @Description       Constructs a vec4 from a vec3 and a w component</span>
<a name="l00771"></a><a class="code" href="structPVRTVec3.html#a23">00771</a> <span class="comment">****************************************************************************/</span>
00772     <a class="code" href="structPVRTVec4.html#a0">PVRTVec4</a>(VERTTYPE fX, <span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; vec3)
00773     {
00774         x = fX; y = vec3.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>; z = vec3.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>; w = vec3.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>;
00775     }
00776 
<a name="l00777"></a><a class="code" href="structPVRTVec4.html">00777</a> <span class="comment">/*!***************************************************************************</span>
00778 <span class="comment"> @Function          constructor from array</span>
00779 <span class="comment"> @Input             pVec a pointer to an array of four values</span>
00780 <span class="comment"> @Description       Constructs a PVRTVec4 from a pointer to an array of four values</span>
00781 <span class="comment">****************************************************************************/</span>
00782     <a class="code" href="structPVRTVec4.html#a0">PVRTVec4</a>(<span class="keyword">const</span> VERTTYPE* pVec)
00783     {
00784         x = (*pVec++); y = (*pVec++); z= (*pVec++); w = *pVec;
00785     }
00786 
<a name="l00787"></a><a class="code" href="structPVRTVec4.html#a0">00787</a> <span class="comment">/*!***************************************************************************</span>
00788 <span class="comment">** PVRTVec4 Operators</span>
00789 <span class="comment">****************************************************************************/</span>
00790 <span class="comment">/*!***************************************************************************</span>
00791 <span class="comment"> @Function          +</span>
00792 <span class="comment"> @Input             rhs another PVRTVec4</span>
00793 <span class="comment"> @Returns           result of addition</span>
<a name="l00794"></a><a class="code" href="structPVRTVec4.html#a1">00794</a> <span class="comment"> @Description       Addition operator for PVRTVec4</span>
00795 <span class="comment">****************************************************************************/</span>
00796     <a class="code" href="structPVRTVec4.html">PVRTVec4</a> <a class="code" href="structPVRTVec4.html#a6">operator+</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec4.html">PVRTVec4</a>&amp; rhs)<span class="keyword"> const</span>
00797 <span class="keyword">    </span>{
00798         <a class="code" href="structPVRTVec4.html">PVRTVec4</a> out;
00799         out.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a> = x+rhs.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a>;
00800         out.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a> = y+rhs.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a>;
00801         out.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a> = z+rhs.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a>;
00802         out.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a> = w+rhs.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a>;
00803         <span class="keywordflow">return</span> out;
00804     }
00805 
00806 <span class="comment">/*!***************************************************************************</span>
00807 <span class="comment"> @Function          -</span>
<a name="l00808"></a><a class="code" href="structPVRTVec4.html#a2">00808</a> <span class="comment"> @Input             rhs another PVRTVec4</span>
00809 <span class="comment"> @Returns           result of subtraction</span>
00810 <span class="comment"> @Description       Subtraction operator for PVRTVec4</span>
00811 <span class="comment">****************************************************************************/</span>
00812     <a class="code" href="structPVRTVec4.html">PVRTVec4</a> <a class="code" href="structPVRTVec4.html#a7">operator-</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec4.html">PVRTVec4</a>&amp; rhs)<span class="keyword"> const</span>
00813 <span class="keyword">    </span>{
00814         <a class="code" href="structPVRTVec4.html">PVRTVec4</a> out;
00815         out.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a> = x-rhs.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a>;
00816         out.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a> = y-rhs.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a>;
00817         out.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a> = z-rhs.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a>;
00818         out.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a> = w-rhs.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a>;
00819         <span class="keywordflow">return</span> out;
<a name="l00820"></a><a class="code" href="structPVRTVec4.html#a3">00820</a>     }
00821 
00822 <span class="comment">/*!***************************************************************************</span>
00823 <span class="comment"> @Function          +=</span>
00824 <span class="comment"> @Input             rhs another PVRTVec4</span>
00825 <span class="comment"> @Returns           result of addition and assignment</span>
00826 <span class="comment"> @Description       Addition and assignment operator for PVRTVec4</span>
00827 <span class="comment">****************************************************************************/</span>
00828     <a class="code" href="structPVRTVec4.html">PVRTVec4</a>&amp; <a class="code" href="structPVRTVec4.html#a8">operator+=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec4.html">PVRTVec4</a>&amp; rhs)
00829     {
00830         x +=rhs.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a>;
00831         y +=rhs.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a>;
<a name="l00832"></a><a class="code" href="structPVRTVec4.html#a4">00832</a>         z +=rhs.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a>;
00833         w +=rhs.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a>;
00834         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00835     }
00836 
00837 <span class="comment">/*!***************************************************************************</span>
00838 <span class="comment"> @Function          -=</span>
00839 <span class="comment"> @Input             rhs another PVRTVec4</span>
00840 <span class="comment"> @Returns           result of subtraction and assignment</span>
00841 <span class="comment"> @Description       Subtraction and assignment operator for PVRTVec4</span>
00842 <span class="comment">****************************************************************************/</span>
<a name="l00843"></a><a class="code" href="structPVRTVec4.html#a5">00843</a>     <a class="code" href="structPVRTVec4.html">PVRTVec4</a>&amp; <a class="code" href="structPVRTVec4.html#a9">operator-=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec4.html">PVRTVec4</a>&amp; rhs)
00844     {
00845         x -=rhs.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a>;
00846         y -=rhs.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a>;
00847         z -=rhs.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a>;
00848         w -=rhs.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a>;
00849         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00850     }
00851 
00852 <span class="comment">/*!***************************************************************************</span>
00853 <span class="comment"> @Function          *</span>
00854 <span class="comment"> @Input             rhs a PVRTMat4</span>
00855 <span class="comment"> @Returns           result of multiplication</span>
00856 <span class="comment"> @Description       matrix multiplication for PVRTVec4 and PVRTMat4</span>
00857 <span class="comment">****************************************************************************/</span>
<a name="l00858"></a><a class="code" href="structPVRTVec4.html#a6">00858</a>     <a class="code" href="structPVRTVec4.html">PVRTVec4</a> <a class="code" href="structPVRTVec4.html#a10">operator*</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; rhs) <span class="keyword">const</span>;
00859 
00860 <span class="comment">/*!***************************************************************************</span>
00861 <span class="comment"> @Function          *=</span>
00862 <span class="comment"> @Input             rhs a PVRTMat4</span>
00863 <span class="comment"> @Returns           result of multiplication and assignement</span>
00864 <span class="comment"> @Description       matrix multiplication and assignment for PVRTVec4 and PVRTMat4</span>
00865 <span class="comment">****************************************************************************/</span>
00866     <a class="code" href="structPVRTVec4.html">PVRTVec4</a>&amp; <a class="code" href="structPVRTVec4.html#a11">operator*=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; rhs);
00867 
00868 <span class="comment">/*!***************************************************************************</span>
00869 <span class="comment"> @Function          *</span>
00870 <span class="comment"> @Input             rhs a single dimension value</span>
00871 <span class="comment"> @Returns           result of multiplication</span>
00872 <span class="comment"> @Description       componentwise multiplication of a PVRTVec4 by a single value</span>
00873 <span class="comment">****************************************************************************/</span>
00874     <a class="code" href="structPVRTVec4.html">PVRTVec4</a> <a class="code" href="structPVRTVec4.html#a10">operator*</a>(<span class="keyword">const</span> VERTTYPE&amp; rhs)<span class="keyword"> const</span>
<a name="l00875"></a><a class="code" href="structPVRTVec4.html#a7">00875</a> <span class="keyword">    </span>{
00876         <a class="code" href="structPVRTVec4.html">PVRTVec4</a> out;
00877         out.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(x,rhs);
00878         out.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(y,rhs);
00879         out.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(z,rhs);
00880         out.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(w,rhs);
00881         <span class="keywordflow">return</span> out;
00882     }
00883 
00884 <span class="comment">/*!***************************************************************************</span>
00885 <span class="comment"> @Function          *=</span>
00886 <span class="comment"> @Input             rhs a single dimension value</span>
00887 <span class="comment"> @Returns           result of multiplication and assignment</span>
00888 <span class="comment"> @Description       componentwise multiplication and assignment of a PVRTVec4 by</span>
00889 <span class="comment">                a single value</span>
00890 <span class="comment">****************************************************************************/</span>
00891     <a class="code" href="structPVRTVec4.html">PVRTVec4</a>&amp; <a class="code" href="structPVRTVec4.html#a11">operator*=</a>(<span class="keyword">const</span> VERTTYPE&amp; rhs)
<a name="l00892"></a><a class="code" href="structPVRTVec4.html#a8">00892</a>     {
00893         x = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(x,rhs);
00894         y = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(y,rhs);
00895         z = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(z,rhs);
00896         w = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(w,rhs);
00897         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00898     }
00899 
00900 <span class="comment">/*!***************************************************************************</span>
00901 <span class="comment"> @Function          /</span>
00902 <span class="comment"> @Input             rhs a single dimension value</span>
00903 <span class="comment"> @Returns           result of division</span>
00904 <span class="comment"> @Description       componentwise division of a PVRTVec4 by a single value</span>
00905 <span class="comment">****************************************************************************/</span>
00906     <a class="code" href="structPVRTVec4.html">PVRTVec4</a> <a class="code" href="structPVRTVec4.html#a14">operator/</a>(<span class="keyword">const</span> VERTTYPE&amp; rhs)<span class="keyword"> const</span>
00907 <span class="keyword">    </span>{
<a name="l00908"></a><a class="code" href="structPVRTVec4.html#a9">00908</a>         <a class="code" href="structPVRTVec4.html">PVRTVec4</a> out;
00909         out.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a> = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(x,rhs);
00910         out.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a> = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(y,rhs);
00911         out.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a> = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(z,rhs);
00912         out.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a> = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(w,rhs);
00913         <span class="keywordflow">return</span> out;
00914     }
00915 
00916 <span class="comment">/*!***************************************************************************</span>
00917 <span class="comment"> @Function          /=</span>
00918 <span class="comment"> @Input             rhs a single dimension value</span>
00919 <span class="comment"> @Returns           result of division and assignment</span>
00920 <span class="comment"> @Description       componentwise division and assignment of a PVRTVec4 by</span>
00921 <span class="comment">                    a single value</span>
00922 <span class="comment">****************************************************************************/</span>
00923     <a class="code" href="structPVRTVec4.html">PVRTVec4</a>&amp; <a class="code" href="structPVRTVec4.html#a15">operator/=</a>(<span class="keyword">const</span> VERTTYPE&amp; rhs)
00924     {
00925         x = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(x,rhs);
00926         y = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(y,rhs);
00927         z = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(z,rhs);
00928         w = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(w,rhs);
00929         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00930     }
00931 
00932 <span class="comment">/*!***************************************************************************</span>
00933 <span class="comment"> @Function          *</span>
00934 <span class="comment"> @Input             lhs a single dimension value</span>
00935 <span class="comment"> @Input             rhs a PVRTVec4</span>
00936 <span class="comment"> @Returns           result of muliplication</span>
00937 <span class="comment"> @Description       componentwise multiplication of a PVRTVec4 by</span>
00938 <span class="comment">                    a single value</span>
00939 <span class="comment">****************************************************************************/</span>
00940 <span class="keyword">friend</span> <a class="code" href="structPVRTVec4.html">PVRTVec4</a> <a class="code" href="structPVRTVec4.html#a10">operator*</a>(<span class="keyword">const</span> VERTTYPE lhs, <span class="keyword">const</span> <a class="code" href="structPVRTVec4.html">PVRTVec4</a>&amp;  rhs)
00941 {
<a name="l00942"></a><a class="code" href="structPVRTVec4.html#a12">00942</a>     <a class="code" href="structPVRTVec4.html">PVRTVec4</a> out;
00943     out.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(lhs,rhs.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a>);
00944     out.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(lhs,rhs.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a>);
00945     out.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(lhs,rhs.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a>);
00946     out.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(lhs,rhs.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a>);
00947     <span class="keywordflow">return</span> out;
00948 }
00949 
00950 <span class="comment">/*!***************************************************************************</span>
00951 <span class="comment"> @Function          ==</span>
00952 <span class="comment"> @Input             rhs a single value</span>
00953 <span class="comment"> @Returns           true if the two vectors are equal</span>
00954 <span class="comment"> @Description       PVRTVec4 equality operator</span>
00955 <span class="comment">****************************************************************************/</span>
00956     <span class="keywordtype">bool</span> <a class="code" href="structPVRTVec4.html#a16">operator==</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec4.html">PVRTVec4</a>&amp; rhs)<span class="keyword"> const</span>
00957 <span class="keyword">    </span>{
00958         <span class="keywordflow">if</span>(x != rhs.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
00959         <span class="keywordflow">if</span>(y != rhs.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00960"></a><a class="code" href="structPVRTVec4.html#a13">00960</a>         <span class="keywordflow">if</span>(z != rhs.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
00961         <span class="keywordflow">if</span>(w != rhs.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
00962         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00963     }
00964 
00965 <span class="comment">/*!***************************************************************************</span>
00966 <span class="comment">@Function           !=</span>
00967 <span class="comment">@Input              rhs a single value</span>
00968 <span class="comment">@Returns            true if the two vectors are not equal</span>
00969 <span class="comment">@Description        PVRTVec4 inequality operator</span>
00970 <span class="comment">    ****************************************************************************/</span>
00971     <span class="keywordtype">bool</span> <a class="code" href="structPVRTVec4.html#a17">operator!=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; rhs)<span class="keyword"> const</span>
00972 <span class="keyword">    </span>{
00973         <span class="keywordflow">if</span>(x == rhs.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>)
00974             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00975 
<a name="l00976"></a><a class="code" href="structPVRTVec4.html#a14">00976</a>         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00977     }
00978 <span class="comment">/*!***************************************************************************</span>
00979 <span class="comment">** Functions</span>
00980 <span class="comment">****************************************************************************/</span>
00981 <span class="comment">/*!***************************************************************************</span>
00982 <span class="comment"> @Function          lenSqr</span>
00983 <span class="comment"> @Returns           square of the magnitude of the vector</span>
00984 <span class="comment"> @Description       calculates the square of the magnitude of the vector</span>
00985 <span class="comment">****************************************************************************/</span>
00986     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <a class="code" href="structPVRTVec4.html#a18">lenSqr</a>()<span class="keyword"> const</span>
00987 <span class="keyword">    </span>{
00988         <span class="keywordflow">return</span> <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(x,x)+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(y,y)+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(z,z)+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(w,w);
00989     }
00990 
00991 <span class="comment">/*!***************************************************************************</span>
00992 <span class="comment"> @Function          length</span>
00993 <span class="comment"> @Returns           the magnitude of the vector</span>
<a name="l00994"></a><a class="code" href="structPVRTVec4.html#a15">00994</a> <span class="comment"> @Description       calculates the magnitude of the vector</span>
00995 <span class="comment">****************************************************************************/</span>
00996     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <a class="code" href="structPVRTVec4.html#a19">length</a>()<span class="keyword"> const</span>
00997 <span class="keyword">    </span>{
00998         <span class="keywordflow">return</span> (<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>) <a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(sqrt(<a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(x)*<a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(x) + <a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(y)*<a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(y) + <a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(z)*<a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(z) + <a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(w)*<a class="code" href="PVRTFixedPoint_8h.html#a26">vt2f</a>(w)));
00999     }
01000 
01001 <span class="comment">/*!***************************************************************************</span>
01002 <span class="comment"> @Function          normalize</span>
01003 <span class="comment"> @Returns           normalized vector</span>
01004 <span class="comment"> @Description       calculates the normalized value of a PVRTVec4</span>
01005 <span class="comment">****************************************************************************/</span>
01006     <a class="code" href="structPVRTVec4.html">PVRTVec4</a> <a class="code" href="structPVRTVec4.html#a20">normalize</a>()
01007     {
01008         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> len = <a class="code" href="structPVRTVec4.html#a19">length</a>();
01009         x =<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(x,len);
01010         y =<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(y,len);
01011         z =<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(z,len);
<a name="l01012"></a><a class="code" href="structPVRTVec4.html#n0">01012</a>         w =<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(w,len);
01013         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01014     }
01015 <span class="comment">/*!***************************************************************************</span>
01016 <span class="comment"> @Function          normalized</span>
01017 <span class="comment"> @Returns           normalized vector</span>
01018 <span class="comment"> @Description       returns a normalized vector of the same direction as this</span>
01019 <span class="comment">                    vector</span>
01020 <span class="comment">****************************************************************************/</span>
01021     <a class="code" href="structPVRTVec4.html">PVRTVec4</a> <a class="code" href="structPVRTVec4.html#a21">normalized</a>()<span class="keyword"> const</span>
01022 <span class="keyword">    </span>{
01023         <a class="code" href="structPVRTVec4.html">PVRTVec4</a> out;
01024         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> len = <a class="code" href="structPVRTVec4.html#a19">length</a>();
01025         out.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a> =<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(x,len);
01026         out.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a> =<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(y,len);
01027         out.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a> =<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(z,len);
01028         out.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a> =<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(w,len);
<a name="l01029"></a><a class="code" href="structPVRTVec4.html#a16">01029</a>         <span class="keywordflow">return</span> out;
01030     }
01031 
01032 <span class="comment">/*!***************************************************************************</span>
01033 <span class="comment"> @Function          dot</span>
01034 <span class="comment"> @Returns           scalar product</span>
01035 <span class="comment"> @Description       returns a normalized vector of the same direction as this</span>
01036 <span class="comment">                    vector</span>
01037 <span class="comment">****************************************************************************/</span>
01038     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <a class="code" href="structPVRTVec4.html#a22">dot</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec4.html">PVRTVec4</a>&amp; rhs)
01039     {
01040         <span class="keywordflow">return</span> <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(x,rhs.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a>)+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(y,rhs.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a>)+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(z,rhs.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a>)+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(w,rhs.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a>);
01041     }
01042 
01043 <span class="comment">/*!***************************************************************************</span>
01044 <span class="comment"> @Function          ptr</span>
<a name="l01045"></a><a class="code" href="structPVRTVec4.html#a17">01045</a> <span class="comment"> @Returns           pointer to vector values</span>
01046 <span class="comment"> @Description       returns a pointer to memory containing the values of the</span>
01047 <span class="comment">                    PVRTVec3</span>
01048 <span class="comment">****************************************************************************/</span>
01049     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> *<a class="code" href="structPVRTVec4.html#a23">ptr</a>() { <span class="keywordflow">return</span> (<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>*)<span class="keyword">this</span>; }
01050 };
01051 
01052 <span class="comment">/*!***************************************************************************</span>
01053 <span class="comment">** PVRTMat3 3x3 Matrix</span>
01054 <span class="comment">****************************************************************************/</span>
01055 <span class="keyword">struct </span><a class="code" href="structPVRTMat3.html">PVRTMat3</a> : <span class="keyword">public</span> <a class="code" href="classPVRTMATRIX3f.html">PVRTMATRIX3</a>
01056 {
01057 <span class="comment">/*!***************************************************************************</span>
01058 <span class="comment">** Constructors</span>
01059 <span class="comment">****************************************************************************/</span>
01060 <span class="comment">/*!***************************************************************************</span>
<a name="l01061"></a><a class="code" href="structPVRTVec4.html#a18">01061</a> <span class="comment"> @Function          PVRTMat3</span>
01062 <span class="comment"> @Description       Blank constructor.</span>
01063 <span class="comment">*****************************************************************************/</span>
01064     <a class="code" href="structPVRTMat3.html#a0">PVRTMat3</a>(){}
01065 <span class="comment">/*!***************************************************************************</span>
01066 <span class="comment"> @Function          PVRTMat3</span>
01067 <span class="comment"> @Input             pMat an array of values for the matrix</span>
01068 <span class="comment"> @Description       Constructor from array.</span>
01069 <span class="comment">*****************************************************************************/</span>
01070     <a class="code" href="structPVRTMat3.html#a0">PVRTMat3</a>(<span class="keyword">const</span> VERTTYPE* pMat)
01071     {
<a name="l01072"></a><a class="code" href="structPVRTVec4.html#a19">01072</a>         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>* ptr = f;
01073         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;9;i++)
01074         {
01075             (*ptr++)=(*pMat++);
01076         }
01077     }
01078 
01079 <span class="comment">/*!***************************************************************************</span>
01080 <span class="comment"> @Function          PVRTMat3</span>
01081 <span class="comment"> @Input             m0 matrix value</span>
01082 <span class="comment"> @Input             m1 matrix value</span>
<a name="l01083"></a><a class="code" href="structPVRTVec4.html#a20">01083</a> <span class="comment"> @Input             m2 matrix value</span>
01084 <span class="comment"> @Input             m3 matrix value</span>
01085 <span class="comment"> @Input             m4 matrix value</span>
01086 <span class="comment"> @Input             m5 matrix value</span>
01087 <span class="comment"> @Input             m6 matrix value</span>
01088 <span class="comment"> @Input             m7 matrix value</span>
01089 <span class="comment"> @Input             m8 matrix value</span>
01090 <span class="comment"> @Description       Constructor from distinct values.</span>
01091 <span class="comment">*****************************************************************************/</span>
01092     <a class="code" href="structPVRTMat3.html#a0">PVRTMat3</a>(VERTTYPE m0,VERTTYPE m1,VERTTYPE m2,
01093         VERTTYPE m3,VERTTYPE m4,VERTTYPE m5,
01094         VERTTYPE m6,VERTTYPE m7,VERTTYPE m8)
01095     {
01096         f[0]=m0;f[1]=m1;f[2]=m2;
01097         f[3]=m3;f[4]=m4;f[5]=m5;
01098         f[6]=m6;f[7]=m7;f[8]=m8;
<a name="l01099"></a><a class="code" href="structPVRTVec4.html#a21">01099</a>     }
01100 
01101 <span class="comment">/*!***************************************************************************</span>
01102 <span class="comment"> @Function          PVRTMat3</span>
01103 <span class="comment"> @Input             mat - a PVRTMat4</span>
01104 <span class="comment"> @Description       Constructor from 4x4 matrix - uses top left values</span>
01105 <span class="comment">*****************************************************************************/</span>
01106     <a class="code" href="structPVRTMat3.html#a0">PVRTMat3</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; mat);
01107 
01108 <span class="comment">/****************************************************************************</span>
01109 <span class="comment">** PVRTMat3 OPERATORS</span>
01110 <span class="comment">****************************************************************************/</span>
01111 <span class="comment">/*!***************************************************************************</span>
01112 <span class="comment"> @Function          ()</span>
01113 <span class="comment"> @Input             row         row of matrix</span>
01114 <span class="comment"> @Input             column      column of matrix</span>
01115 <span class="comment"> @Returns           value of element</span>
01116 <span class="comment"> @Description       Returns the value of the element at the specified row and column </span>
<a name="l01117"></a><a class="code" href="structPVRTVec4.html#a22">01117</a> <span class="comment">                    of the PVRTMat3</span>
01118 <span class="comment">*****************************************************************************/</span>
01119     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>&amp; <a class="code" href="structPVRTMat3.html#a4">operator()</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> row, <span class="keyword">const</span> <span class="keywordtype">int</span> column)
01120     {
01121         <span class="keywordflow">return</span> f[column*3+row];
01122     }
01123 <span class="comment">/*!***************************************************************************</span>
01124 <span class="comment"> @Function          ()</span>
01125 <span class="comment"> @Input             row         row of matrix</span>
01126 <span class="comment"> @Input             column      column of matrix</span>
01127 <span class="comment"> @Returns           value of element</span>
01128 <span class="comment"> @Description       Returns the value of the element at the specified row and column </span>
<a name="l01129"></a><a class="code" href="structPVRTVec4.html#a23">01129</a> <span class="comment">                    of the PVRTMat3</span>
01130 <span class="comment">*****************************************************************************/</span>
01131     <span class="keyword">const</span> <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>&amp; <a class="code" href="structPVRTMat3.html#a4">operator()</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> row, <span class="keyword">const</span> <span class="keywordtype">int</span> column)<span class="keyword"> const</span>
01132 <span class="keyword">    </span>{
01133         <span class="keywordflow">return</span> f[column*3+row];
01134     }
<a name="l01135"></a><a class="code" href="structPVRTMat3.html">01135</a> 
01136 <span class="comment">/*!***************************************************************************</span>
01137 <span class="comment"> @Function          *</span>
01138 <span class="comment"> @Input             rhs another PVRTMat3</span>
01139 <span class="comment"> @Returns           result of multiplication</span>
01140 <span class="comment"> @Description       Matrix multiplication of two 3x3 matrices.</span>
01141 <span class="comment">*****************************************************************************/</span>
01142     <a class="code" href="structPVRTMat3.html">PVRTMat3</a> <a class="code" href="structPVRTMat3.html#a6">operator*</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat3.html">PVRTMat3</a>&amp; rhs)<span class="keyword"> const</span>
01143 <span class="keyword">    </span>{
01144         <a class="code" href="structPVRTMat3.html">PVRTMat3</a> out;
<a name="l01145"></a><a class="code" href="structPVRTMat3.html#a0">01145</a>         <span class="comment">// col 1</span>
01146         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[0] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[0],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[0])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[1])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[6],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[2]);
01147         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[1] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[0])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[4],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[1])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[7],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[2]);
01148         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[2] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[2],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[0])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[5],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[1])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[8],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[2]);
01149 
01150         <span class="comment">// col 2</span>
01151         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[3] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[0],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[3])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[4])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[6],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[5]);
<a name="l01152"></a><a class="code" href="structPVRTMat3.html#a1">01152</a>         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[4] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[3])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[4],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[4])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[7],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[5]);
01153         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[5] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[2],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[3])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[5],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[4])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[8],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[5]);
01154 
01155         <span class="comment">// col3</span>
01156         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[6] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[0],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[6])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[7])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[6],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[8]);
01157         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[7] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[6])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[4],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[7])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[7],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[8]);
01158         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[8] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[2],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[6])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[5],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[7])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[8],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[8]);
01159         <span class="keywordflow">return</span> out;
01160     }
01161 
01162 <span class="comment">/*!***************************************************************************</span>
01163 <span class="comment"> @Function          +</span>
01164 <span class="comment"> @Input             rhs another PVRTMat3</span>
01165 <span class="comment"> @Returns           result of addition</span>
01166 <span class="comment"> @Description       element by element addition operator.</span>
01167 <span class="comment">*****************************************************************************/</span>
01168     <a class="code" href="structPVRTMat3.html">PVRTMat3</a> <a class="code" href="structPVRTMat3.html#a7">operator+</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat3.html">PVRTMat3</a>&amp; rhs)<span class="keyword"> const</span>
01169 <span class="keyword">    </span>{
01170         <a class="code" href="structPVRTMat3.html">PVRTMat3</a> out;
01171         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <span class="keyword">const</span> *lptr = f, *rptr = rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>;
01172         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> *outptr = out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>;
01173         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;9;i++)
01174         {
<a name="l01175"></a><a class="code" href="structPVRTMat3.html#a2">01175</a>             (*outptr++) = (*lptr++) + (*rptr++);
01176         }
01177         <span class="keywordflow">return</span> out;
01178     }
01179 
01180 <span class="comment">/*!***************************************************************************</span>
01181 <span class="comment"> @Function          -</span>
01182 <span class="comment"> @Input             rhs another PVRTMat3</span>
01183 <span class="comment"> @Returns           result of subtraction</span>
01184 <span class="comment"> @Description       element by element subtraction operator.</span>
01185 <span class="comment">*****************************************************************************/</span>
01186     <a class="code" href="structPVRTMat3.html">PVRTMat3</a> <a class="code" href="structPVRTMat3.html#a8">operator-</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat3.html">PVRTMat3</a>&amp; rhs)<span class="keyword"> const</span>
01187 <span class="keyword">    </span>{
01188         <a class="code" href="structPVRTMat3.html">PVRTMat3</a> out;
01189         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <span class="keyword">const</span> *lptr = f, *rptr = rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>;
01190         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> *outptr = out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>;
01191         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;9;i++)
01192         {
01193             (*outptr++) = (*lptr++) - (*rptr++);
01194         }
01195         <span class="keywordflow">return</span> out;
01196     }
01197 
01198 <span class="comment">/*!***************************************************************************</span>
01199 <span class="comment"> @Function          +=</span>
01200 <span class="comment"> @Input             rhs another PVRTMat3</span>
01201 <span class="comment"> @Returns           result of addition and assignment</span>
01202 <span class="comment"> @Description       element by element addition and assignment operator.</span>
01203 <span class="comment">*****************************************************************************/</span>
<a name="l01204"></a><a class="code" href="structPVRTMat3.html#a4">01204</a>     <a class="code" href="structPVRTMat3.html">PVRTMat3</a>&amp; <a class="code" href="structPVRTMat3.html#a9">operator+=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat3.html">PVRTMat3</a>&amp; rhs)
01205     {
01206         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> *lptr = f;
01207         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <span class="keyword">const</span> *rptr = rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>;
01208         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;9;i++)
01209         {
01210             (*lptr++) += (*rptr++);
01211         }
01212         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01213     }
01214 
01215 <span class="comment">/*!***************************************************************************</span>
01216 <span class="comment"> @Function          -=</span>
<a name="l01217"></a><a class="code" href="structPVRTMat3.html#a5">01217</a> <span class="comment"> @Input             rhs another PVRTMat3</span>
01218 <span class="comment"> @Returns           result of subtraction and assignment</span>
01219 <span class="comment"> @Description       element by element subtraction and assignment operator.</span>
01220 <span class="comment">*****************************************************************************/</span>
01221     <a class="code" href="structPVRTMat3.html">PVRTMat3</a>&amp; <a class="code" href="structPVRTMat3.html#a10">operator-=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat3.html">PVRTMat3</a>&amp; rhs)
01222     {
01223         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> *lptr = f;
01224         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <span class="keyword">const</span> *rptr = rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>;
01225         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;9;i++)
01226         {
01227             (*lptr++) -= (*rptr++);
01228         }
<a name="l01229"></a><a class="code" href="structPVRTMat3.html#a6">01229</a>         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01230     }
01231 
01232 <span class="comment">/*!***************************************************************************</span>
01233 <span class="comment"> @Function          *=</span>
01234 <span class="comment"> @Input             rhs another PVRTMat3</span>
01235 <span class="comment"> @Returns           result of multiplication and assignment</span>
01236 <span class="comment"> @Description       Matrix multiplication and assignment of two 3x3 matrices.</span>
01237 <span class="comment">*****************************************************************************/</span>
01238     <a class="code" href="structPVRTMat3.html">PVRTMat3</a>&amp; <a class="code" href="structPVRTMat3.html#a11">operator*=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat3.html">PVRTMat3</a>&amp; rhs)
01239     {
01240         <a class="code" href="structPVRTMat3.html">PVRTMat3</a> out;
01241         <span class="comment">// col 1</span>
01242         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[0] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[0],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[0])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[1])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[6],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[2]);
01243         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[1] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[0])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[4],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[1])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[7],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[2]);
01244         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[2] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[2],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[0])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[5],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[1])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[8],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[2]);
01245 
01246         <span class="comment">// col 2</span>
01247         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[3] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[0],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[3])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[4])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[6],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[5]);
01248         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[4] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[3])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[4],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[4])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[7],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[5]);
01249         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[5] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[2],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[3])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[5],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[4])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[8],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[5]);
01250 
01251         <span class="comment">// col3</span>
01252         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[6] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[0],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[6])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[7])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[6],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[8]);
01253         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[7] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[6])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[4],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[7])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[7],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[8]);
01254         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[8] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[2],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[6])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[5],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[7])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[8],rhs.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[8]);
01255         *<span class="keyword">this</span> = out;
<a name="l01256"></a><a class="code" href="structPVRTMat3.html#a7">01256</a>         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01257     }
01258 
01259 <span class="comment">/*!***************************************************************************</span>
01260 <span class="comment"> @Function          *</span>
01261 <span class="comment"> @Input             rhs a single value</span>
01262 <span class="comment"> @Returns           result of multiplication and assignment</span>
01263 <span class="comment"> @Description       element multiplication by a single value.</span>
01264 <span class="comment">*****************************************************************************/</span>
01265     <a class="code" href="structPVRTMat3.html">PVRTMat3</a>&amp; <a class="code" href="structPVRTMat3.html#a6">operator*</a>(<span class="keyword">const</span> VERTTYPE rhs)
01266     {
01267         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;9; ++i)
01268         {
01269             f[i]*=rhs;
01270         }
01271         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01272     }
01273 <span class="comment">/*!***************************************************************************</span>
01274 <span class="comment"> @Function          *=</span>
<a name="l01275"></a><a class="code" href="structPVRTMat3.html#a8">01275</a> <span class="comment"> @Input             rhs a single value</span>
01276 <span class="comment"> @Returns           result of multiplication and assignment</span>
01277 <span class="comment"> @Description       element multiplication and assignment by a single value.</span>
01278 <span class="comment">*****************************************************************************/</span>
01279     <a class="code" href="structPVRTMat3.html">PVRTMat3</a>&amp; <a class="code" href="structPVRTMat3.html#a11">operator*=</a>(<span class="keyword">const</span> VERTTYPE rhs)
01280     {
01281         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;9; ++i)
01282         {
01283             f[i]*=rhs;
01284         }
01285         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01286     }
01287 
01288 <span class="comment">/*!***************************************************************************</span>
01289 <span class="comment"> @Function          *</span>
01290 <span class="comment"> @Input             rhs another PVRTVec3</span>
01291 <span class="comment"> @Returns           result of multiplication</span>
01292 <span class="comment"> @Description       Matrix multiplication of 3x3 matrix and vec3</span>
01293 <span class="comment">*****************************************************************************/</span>
<a name="l01294"></a><a class="code" href="structPVRTMat3.html#a9">01294</a>     <a class="code" href="structPVRTVec3.html">PVRTVec3</a> <a class="code" href="structPVRTMat3.html#a6">operator*</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; rhs)<span class="keyword"> const</span>
01295 <span class="keyword">    </span>{
01296         <a class="code" href="structPVRTVec3.html">PVRTVec3</a> out;
01297         out.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>,f[0])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>,f[3])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>,f[6]);
01298         out.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>,f[1])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>,f[4])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>,f[7]);
01299         out.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>,f[2])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>,f[5])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>,f[8]);
01300 
01301         <span class="keywordflow">return</span> out;
01302     }
01303 
01304 
01305     <span class="comment">// FUNCTIONS</span>
01306 <span class="comment">/*!***************************************************************************</span>
01307 <span class="comment">** Functions</span>
01308 <span class="comment">*****************************************************************************/</span>
01309 <span class="comment">/*!***************************************************************************</span>
01310 <span class="comment"> @Function          determinant</span>
01311 <span class="comment"> @Returns           result of multiplication</span>
<a name="l01312"></a><a class="code" href="structPVRTMat3.html#a10">01312</a> <span class="comment"> @Description       Matrix multiplication and assignment of 3x3 matrix and vec3</span>
01313 <span class="comment">*****************************************************************************/</span>
01314     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <a class="code" href="structPVRTMat3.html#a15">determinant</a>()<span class="keyword"> const</span>
01315 <span class="keyword">    </span>{
01316         <span class="keywordflow">return</span> <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[0],(<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[4],f[8])-<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[7],f[5])))
01317             - <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],(<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],f[8])-<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[7],f[2])))
01318             + <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[6],(<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],f[5])-<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[4],f[2])));
01319     }
01320 
01321 <span class="comment">/*!***************************************************************************</span>
01322 <span class="comment"> @Function          inverse</span>
01323 <span class="comment"> @Returns           inverse mat3</span>
01324 <span class="comment"> @Description       Calculates multiplicative inverse of this matrix</span>
01325 <span class="comment">*****************************************************************************/</span>
01326     <a class="code" href="structPVRTMat3.html">PVRTMat3</a> <a class="code" href="structPVRTMat3.html#a16">inverse</a>()<span class="keyword"> const</span>
01327 <span class="keyword">    </span>{
01328         <a class="code" href="structPVRTMat3.html">PVRTMat3</a> out;
01329 
<a name="l01330"></a><a class="code" href="structPVRTMat3.html#a11">01330</a> 
01331         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> recDet = <a class="code" href="structPVRTMat3.html#a15">determinant</a>();
01332         <a class="code" href="PVRTGlobal_8h.html#a9">_ASSERT</a>(recDet!=0);
01333         recDet = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(<a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1.0f),recDet);
01334 
01335         <span class="comment">//TODO: deal with singular matrices with more than just an assert</span>
01336 
01337         <span class="comment">// inverse is 1/det * adjoint of M</span>
01338 
01339         <span class="comment">// adjoint is transpose of cofactor matrix</span>
01340 
01341         <span class="comment">// do transpose and cofactors in one step</span>
01342 
01343         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[0] = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[4],f[8]) - <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[5],f[7]);
01344         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[1] = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[2],f[7]) - <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],f[8]);
01345         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[2] = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],f[5]) - <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[2],f[4]);
01346 
01347         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[3] = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[5],f[6]) - <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],f[8]);
01348         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[4] = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[0],f[8]) - <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[2],f[6]);
01349         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[5] = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[2],f[3]) - <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[0],f[5]);
01350 
01351         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[6] = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],f[7]) - <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[4],f[6]);
01352         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[7] = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],f[6]) - <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[0],f[7]);
01353         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[8] = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[0],f[4]) - <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],f[3]);
01354 
01355         out *= recDet;
01356         <span class="keywordflow">return</span> out;
01357     }
<a name="l01358"></a><a class="code" href="structPVRTMat3.html#a12">01358</a> 
01359 <span class="comment">/*!***************************************************************************</span>
01360 <span class="comment"> @Function          transpose</span>
01361 <span class="comment"> @Returns           transpose 3x3 matrix</span>
01362 <span class="comment"> @Description       Calculates the transpose of this matrix</span>
01363 <span class="comment">*****************************************************************************/</span>
01364     <a class="code" href="structPVRTMat3.html">PVRTMat3</a> <a class="code" href="structPVRTMat3.html#a17">transpose</a>()<span class="keyword"> const</span>
01365 <span class="keyword">    </span>{
01366         <a class="code" href="structPVRTMat3.html">PVRTMat3</a> out;
01367         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[0] = f[0];    out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[3] = f[1];    out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[6] = f[2];
01368         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[1] = f[3];    out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[4] = f[4];    out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[7] = f[5];
01369         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[2] = f[6];    out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[5] = f[7];    out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[8] = f[8];
01370         <span class="keywordflow">return</span> out;
01371     }
01372 
<a name="l01373"></a><a class="code" href="structPVRTMat3.html#a13">01373</a> <span class="comment">/*!***************************************************************************</span>
01374 <span class="comment"> @Function          ptr</span>
01375 <span class="comment"> @Returns           pointer to an array of the elements of this PVRTMat3</span>
01376 <span class="comment"> @Description       Calculates transpose of this matrix</span>
01377 <span class="comment">*****************************************************************************/</span>
01378     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> *<a class="code" href="structPVRTMat3.html#a18">ptr</a>() { <span class="keywordflow">return</span> (<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>*)&amp;f; }
01379 
01380 <span class="comment">/*!***************************************************************************</span>
01381 <span class="comment">** Static factory functions</span>
01382 <span class="comment">*****************************************************************************/</span>
01383 <span class="comment">/*!***************************************************************************</span>
01384 <span class="comment"> @Function          Identity</span>
01385 <span class="comment"> @Returns           a PVRTMat3 representation of the 3x3 identity matrix</span>
01386 <span class="comment"> @Description       Generates an identity matrix</span>
01387 <span class="comment">*****************************************************************************/</span>
01388     <span class="keyword">static</span> <a class="code" href="structPVRTMat3.html">PVRTMat3</a> <a class="code" href="structPVRTMat3.html#e0">Identity</a>()
<a name="l01389"></a><a class="code" href="structPVRTMat3.html#a14">01389</a>     {
01390         <a class="code" href="structPVRTMat3.html">PVRTMat3</a> out;
01391         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[0] = 1;out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[1] = 0;out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[2] = 0;
01392         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[3] = 0;out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[4] = 1;out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[5] = 0;
01393         out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[6] = 0;out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[7] = 0;out.<a class="code" href="classPVRTMATRIX3f.html#o0">f</a>[8] = 1;
01394         <span class="keywordflow">return</span> out;
01395     }
01396 
01397 <span class="comment">/*!***************************************************************************</span>
01398 <span class="comment"> @Function          RotationX</span>
01399 <span class="comment"> @Returns           a PVRTMat3 corresponding to the requested rotation</span>
01400 <span class="comment"> @Description       Calculates a matrix corresponding to a rotation of angle</span>
01401 <span class="comment">                    degrees about the X axis</span>
01402 <span class="comment">*****************************************************************************/</span>
01403     <span class="keyword">static</span> <a class="code" href="structPVRTMat3.html">PVRTMat3</a> <a class="code" href="structPVRTMat3.html#e1">RotationX</a>(VERTTYPE angle);
01404 
01405 <span class="comment">/*!***************************************************************************</span>
01406 <span class="comment"> @Function          RotationY</span>
01407 <span class="comment"> @Returns           a PVRTMat3 corresponding to the requested rotation</span>
01408 <span class="comment"> @Description       Calculates a matrix corresponding to a rotation of angle</span>
01409 <span class="comment">                    degrees about the Y axis</span>
<a name="l01410"></a><a class="code" href="structPVRTMat3.html#a15">01410</a> <span class="comment">*****************************************************************************/</span>
01411     <span class="keyword">static</span> <a class="code" href="structPVRTMat3.html">PVRTMat3</a> <a class="code" href="structPVRTMat3.html#e2">RotationY</a>(VERTTYPE angle);
01412 
01413 <span class="comment">/*!***************************************************************************</span>
01414 <span class="comment"> @Function          RotationZ</span>
01415 <span class="comment"> @Returns           a PVRTMat3 corresponding to the requested rotation</span>
01416 <span class="comment"> @Description       Calculates a matrix corresponding to a rotation of angle</span>
01417 <span class="comment">                    degrees about the Z axis</span>
01418 <span class="comment">*****************************************************************************/</span>
01419     <span class="keyword">static</span> <a class="code" href="structPVRTMat3.html">PVRTMat3</a> <a class="code" href="structPVRTMat3.html#e3">RotationZ</a>(VERTTYPE angle);
01420 
01421 <span class="comment">/*!***************************************************************************</span>
01422 <span class="comment"> @Function          Scale</span>
<a name="l01423"></a><a class="code" href="structPVRTMat3.html#a16">01423</a> <span class="comment"> @Returns           a PVRTMat3 corresponding to the requested scaling transformation</span>
01424 <span class="comment"> @Description       Calculates a matrix corresponding to scaling of fx, fy and fz</span>
01425 <span class="comment">                    times in each axis.</span>
01426 <span class="comment">*****************************************************************************/</span>
01427     <span class="keyword">static</span> <a class="code" href="structPVRTMat3.html">PVRTMat3</a> <a class="code" href="structPVRTMat3.html#e4">Scale</a>(<span class="keyword">const</span> VERTTYPE fx,<span class="keyword">const</span> VERTTYPE fy,<span class="keyword">const</span> VERTTYPE fz)
01428     {
01429         <span class="keywordflow">return</span> <a class="code" href="structPVRTMat3.html#a0">PVRTMat3</a>(fx,0,0,
01430             0,fy,0,
01431             0,0,fz);
01432     }
01433 
01434 
01435 <span class="comment">/*!***************************************************************************</span>
01436 <span class="comment"> @Function          Translation</span>
01437 <span class="comment"> @Returns           a PVRTMat3 corresponding to the requested translation</span>
01438 <span class="comment"> @Description       Calculates a matrix corresponding to a transformation</span>
01439 <span class="comment">                    of tx and ty times in each axis.</span>
01440 <span class="comment">*****************************************************************************/</span>
01441     <span class="keyword">static</span> <a class="code" href="structPVRTMat3.html">PVRTMat3</a> <a class="code" href="structPVRTMat3.html#e5">Translation</a>(<span class="keyword">const</span> VERTTYPE tx, <span class="keyword">const</span> VERTTYPE ty)
01442     {
01443         <span class="keywordflow">return</span> <a class="code" href="structPVRTMat3.html#a0">PVRTMat3</a>( <a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1),    0,  0,
01444             0,    <a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1),  0,
01445             tx,  ty,  <a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1));
01446     }
01447 
01448 };
01449 
01450 <span class="comment">/*!***************************************************************************</span>
01451 <span class="comment">** PVRTMat4 4x4 Matrix</span>
01452 <span class="comment">****************************************************************************/</span>
01453 <span class="keyword">struct </span><a class="code" href="structPVRTMat4.html">PVRTMat4</a> : <span class="keyword">public</span> <a class="code" href="classPVRTMATRIXf.html">PVRTMATRIX</a>
01454 {
01455 <span class="comment">/*!***************************************************************************</span>
01456 <span class="comment">** Constructors</span>
01457 <span class="comment">****************************************************************************/</span>
01458 <span class="comment">/*!***************************************************************************</span>
01459 <span class="comment"> @Function          PVRTMat4</span>
01460 <span class="comment"> @Description       Blank constructor.</span>
01461 <span class="comment">*****************************************************************************/</span>
<a name="l01462"></a><a class="code" href="structPVRTMat3.html#a17">01462</a>     <a class="code" href="structPVRTMat4.html#a0">PVRTMat4</a>(){}
01463 <span class="comment">/*!***************************************************************************</span>
01464 <span class="comment"> @Function          PVRTMat4</span>
01465 <span class="comment"> @Input             m0 matrix value</span>
01466 <span class="comment"> @Input             m1 matrix value</span>
01467 <span class="comment"> @Input             m2 matrix value</span>
01468 <span class="comment"> @Input             m3 matrix value</span>
01469 <span class="comment"> @Input             m4 matrix value</span>
01470 <span class="comment"> @Input             m5 matrix value</span>
01471 <span class="comment"> @Input             m6 matrix value</span>
01472 <span class="comment"> @Input             m7 matrix value</span>
01473 <span class="comment"> @Input             m8 matrix value</span>
01474 <span class="comment"> @Input             m9 matrix value</span>
01475 <span class="comment"> @Input             m10 matrix value</span>
01476 <span class="comment"> @Input             m11 matrix value</span>
<a name="l01477"></a><a class="code" href="structPVRTMat3.html#a18">01477</a> <span class="comment"> @Input             m12 matrix value</span>
01478 <span class="comment"> @Input             m13 matrix value</span>
01479 <span class="comment"> @Input             m14 matrix value</span>
01480 <span class="comment"> @Input             m15 matrix value</span>
01481 <span class="comment"> @Description       Constructor from array.</span>
01482 <span class="comment">*****************************************************************************/</span>
01483     <a class="code" href="structPVRTMat4.html#a0">PVRTMat4</a>(VERTTYPE m0,VERTTYPE m1,VERTTYPE m2,VERTTYPE m3,
01484         VERTTYPE m4,VERTTYPE m5,VERTTYPE m6,VERTTYPE m7,
01485         VERTTYPE m8,VERTTYPE m9,VERTTYPE m10,VERTTYPE m11,
01486         VERTTYPE m12,VERTTYPE m13,VERTTYPE m14,VERTTYPE m15)
01487     {
<a name="l01488"></a><a class="code" href="structPVRTMat3.html#e0">01488</a>         f[0]=m0;f[1]=m1;f[2]=m2;f[3]=m3;
01489         f[4]=m4;f[5]=m5;f[6]=m6;f[7]=m7;
01490         f[8]=m8;f[9]=m9;f[10]=m10;f[11]=m11;
01491         f[12]=m12;f[13]=m13;f[14]=m14;f[15]=m15;
01492     }
01493 <span class="comment">/*!***************************************************************************</span>
01494 <span class="comment"> @Function          PVRTMat4</span>
01495 <span class="comment"> @Input             mat A pointer to an array of 16 VERTTYPEs</span>
01496 <span class="comment"> @Description       Constructor from distinct values.</span>
01497 <span class="comment">*****************************************************************************/</span>
01498     <a class="code" href="structPVRTMat4.html#a0">PVRTMat4</a>(<span class="keyword">const</span> VERTTYPE* mat)
01499     {
01500         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>* ptr = f;
01501         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;16;i++)
01502         {
01503             (*ptr++)=(*mat++);
01504         }
01505     }
01506 
01507 <span class="comment">/****************************************************************************</span>
01508 <span class="comment">** PVRTMat4 OPERATORS</span>
01509 <span class="comment">****************************************************************************/</span>
01510 <span class="comment">/*!***************************************************************************</span>
01511 <span class="comment"> @Function          ()</span>
01512 <span class="comment"> @Input             r - row of matrix</span>
01513 <span class="comment"> @Input             c - column of matrix</span>
01514 <span class="comment"> @Returns           value of element</span>
01515 <span class="comment"> @Description       Returns value of the element at row r and colun c of the</span>
01516 <span class="comment">                    PVRTMat4</span>
01517 <span class="comment">*****************************************************************************/</span>
01518     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>&amp; <a class="code" href="structPVRTMat4.html#a3">operator()</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> r, <span class="keyword">const</span> <span class="keywordtype">int</span> c)
01519     {
01520         <span class="keywordflow">return</span> f[c*4+r];
01521     }
01522 
01523 <span class="comment">/*!***************************************************************************</span>
01524 <span class="comment"> @Function          ()</span>
01525 <span class="comment"> @Input             r - row of matrix</span>
01526 <span class="comment"> @Input             c - column of matrix</span>
01527 <span class="comment"> @Returns           value of element</span>
01528 <span class="comment"> @Description       Returns value of the element at row r and colun c of the</span>
01529 <span class="comment">                    PVRTMat4</span>
01530 <span class="comment">*****************************************************************************/</span>
<a name="l01531"></a><a class="code" href="structPVRTMat3.html#e4">01531</a>     <span class="keyword">const</span> <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>&amp; <a class="code" href="structPVRTMat4.html#a3">operator()</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> r, <span class="keyword">const</span> <span class="keywordtype">int</span> c)<span class="keyword"> const</span>
01532 <span class="keyword">    </span>{
01533         <span class="keywordflow">return</span> f[c*4+r];
01534     }
01535 
01536 <span class="comment">/*!***************************************************************************</span>
01537 <span class="comment"> @Function          *</span>
01538 <span class="comment"> @Input             rhs another PVRTMat4</span>
01539 <span class="comment"> @Returns           result of multiplication</span>
01540 <span class="comment"> @Description       Matrix multiplication of two 4x4 matrices.</span>
01541 <span class="comment">*****************************************************************************/</span>
01542     <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#a5">operator*</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; rhs) <span class="keyword">const</span>;
01543 
01544 <span class="comment">/*!***************************************************************************</span>
01545 <span class="comment"> @Function          +</span>
<a name="l01546"></a><a class="code" href="structPVRTMat3.html#e5">01546</a> <span class="comment"> @Input             rhs another PVRTMat4</span>
01547 <span class="comment"> @Returns           result of addition</span>
01548 <span class="comment"> @Description       element by element addition operator.</span>
01549 <span class="comment">*****************************************************************************/</span>
01550     <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#a6">operator+</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; rhs)<span class="keyword"> const</span>
01551 <span class="keyword">    </span>{
01552         <a class="code" href="structPVRTMat4.html">PVRTMat4</a> out;
01553         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <span class="keyword">const</span> *lptr = f, *rptr = rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>;
01554         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> *outptr = out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>;
01555         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;16;i++)
01556         {
01557             (*outptr++) = (*lptr++) + (*rptr++);
<a name="l01558"></a><a class="code" href="structPVRTMat4.html">01558</a>         }
01559         <span class="keywordflow">return</span> out;
01560     }
01561 
01562 <span class="comment">/*!***************************************************************************</span>
01563 <span class="comment"> @Function          -</span>
01564 <span class="comment"> @Input             rhs another PVRTMat4</span>
01565 <span class="comment"> @Returns           result of subtraction</span>
01566 <span class="comment"> @Description       element by element subtraction operator.</span>
01567 <span class="comment">*****************************************************************************/</span>
<a name="l01568"></a><a class="code" href="structPVRTMat4.html#a0">01568</a>     <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#a7">operator-</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; rhs)<span class="keyword"> const</span>
01569 <span class="keyword">    </span>{
01570         <a class="code" href="structPVRTMat4.html">PVRTMat4</a> out;
01571         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;16;i++)
01572         {
01573             out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[i] = f[i]-rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[i];
01574         }
01575         <span class="keywordflow">return</span> out;
01576     }
01577 
01578 <span class="comment">/*!***************************************************************************</span>
01579 <span class="comment"> @Function          +=</span>
01580 <span class="comment"> @Input             rhs another PVRTMat4</span>
01581 <span class="comment"> @Returns           result of addition and assignment</span>
01582 <span class="comment"> @Description       element by element addition and assignment operator.</span>
01583 <span class="comment">*****************************************************************************/</span>
01584     <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; <a class="code" href="structPVRTMat4.html#a8">operator+=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; rhs)
01585     {
01586         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> *lptr = f;
01587         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <span class="keyword">const</span> *rptr = rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>;
01588         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;16;i++)
01589         {
<a name="l01590"></a><a class="code" href="structPVRTMat4.html#a1">01590</a>             (*lptr++) += (*rptr++);
01591         }
01592         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01593     }
01594 
01595 <span class="comment">/*!***************************************************************************</span>
01596 <span class="comment"> @Function          -=</span>
01597 <span class="comment"> @Input             rhs another PVRTMat4</span>
01598 <span class="comment"> @Returns           result of subtraction and assignment</span>
01599 <span class="comment"> @Description       element by element subtraction and assignment operator.</span>
01600 <span class="comment">*****************************************************************************/</span>
01601     <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; <a class="code" href="structPVRTMat4.html#a9">operator-=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; rhs)
01602     {
01603         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> *lptr = f;
01604         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> <span class="keyword">const</span> *rptr = rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>;
01605         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;16;i++)
<a name="l01606"></a><a class="code" href="structPVRTMat4.html#a2">01606</a>         {
01607             (*lptr++) -= (*rptr++);
01608         }
01609         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01610     }
01611 
01612 
01613 <span class="comment">/*!***************************************************************************</span>
01614 <span class="comment"> @Function          *=</span>
01615 <span class="comment"> @Input             rhs another PVRTMat4</span>
01616 <span class="comment"> @Returns           result of multiplication and assignment</span>
01617 <span class="comment"> @Description       Matrix multiplication and assignment of two 4x4 matrices.</span>
01618 <span class="comment">*****************************************************************************/</span>
01619     <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; <a class="code" href="structPVRTMat4.html#a10">operator*=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; rhs)
01620     {
01621         <a class="code" href="structPVRTMat4.html">PVRTMat4</a> result;
01622         <span class="comment">// col 0</span>
01623         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[0] =   <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[0],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[0])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[4],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[1])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[8],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[2])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[12],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[3]);
01624         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[1] =   <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[0])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[5],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[1])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[9],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[2])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[13],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[3]);
01625         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[2] =   <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[2],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[0])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[6],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[1])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[10],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[2])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[14],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[3]);
01626         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[3] =   <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[0])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[7],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[1])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[11],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[2])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[15],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[3]);
<a name="l01627"></a><a class="code" href="structPVRTMat4.html#a3">01627</a> 
01628         <span class="comment">// col 1</span>
01629         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[4] =   <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[0],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[4])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[4],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[5])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[8],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[6])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[12],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[7]);
01630         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[5] =   <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[4])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[5],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[5])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[9],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[6])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[13],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[7]);
01631         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[6] =   <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[2],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[4])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[6],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[5])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[10],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[6])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[14],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[7]);
01632         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[7] =   <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[4])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[7],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[5])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[11],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[6])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[15],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[7]);
01633 
01634         <span class="comment">// col 2</span>
01635         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[8] =   <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[0],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[8])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[4],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[9])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[8],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[12],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[11]);
01636         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[9] =   <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[8])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[5],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[9])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[9],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[13],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[11]);
01637         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[2],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[8])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[6],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[9])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[10],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[14],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[11]);
01638         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[11] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[8])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[7],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[9])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[11],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[15],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[11]);
01639 
01640         <span class="comment">// col 3</span>
<a name="l01641"></a><a class="code" href="structPVRTMat4.html#a4">01641</a>         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[12] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[0],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[12])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[4],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[13])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[8],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[14])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[12],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[15]);
01642         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[13] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[1],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[12])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[5],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[13])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[9],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[14])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[13],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[15]);
01643         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[14] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[2],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[12])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[6],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[13])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[10],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[14])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[14],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[15]);
01644         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[15] =  <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[12])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[7],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[13])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[11],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[14])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[15],rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[15]);
01645 
01646         *<span class="keyword">this</span> = result;
01647         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01648     }
01649 
01650 <span class="comment">/*!***************************************************************************</span>
01651 <span class="comment"> @Function          *</span>
01652 <span class="comment"> @Input             rhs a single value</span>
01653 <span class="comment"> @Returns           result of multiplication and assignment</span>
01654 <span class="comment"> @Description       element multiplication by a single value.</span>
01655 <span class="comment">*****************************************************************************/</span>
01656     <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; <a class="code" href="structPVRTMat4.html#a5">operator*</a>(<span class="keyword">const</span> VERTTYPE rhs)
01657     {
01658         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;16; ++i)
01659         {
01660             f[i]*=rhs;
01661         }
<a name="l01662"></a><a class="code" href="structPVRTMat4.html#a6">01662</a>         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01663     }
01664 <span class="comment">/*!***************************************************************************</span>
01665 <span class="comment"> @Function          *=</span>
01666 <span class="comment"> @Input             rhs a single value</span>
01667 <span class="comment"> @Returns           result of multiplication and assignment</span>
01668 <span class="comment"> @Description       element multiplication and assignment by a single value.</span>
01669 <span class="comment">*****************************************************************************/</span>
01670     <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; <a class="code" href="structPVRTMat4.html#a10">operator*=</a>(<span class="keyword">const</span> VERTTYPE rhs)
01671     {
01672         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;16; ++i)
01673         {
01674             f[i]*=rhs;
01675         }
01676         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01677     }
01678 
01679 <span class="comment">/*!***************************************************************************</span>
01680 <span class="comment"> @Function          =</span>
<a name="l01681"></a><a class="code" href="structPVRTMat4.html#a7">01681</a> <span class="comment"> @Input             rhs another PVRTMat4</span>
01682 <span class="comment"> @Returns           result of assignment</span>
01683 <span class="comment"> @Description       element assignment operator.</span>
01684 <span class="comment">*****************************************************************************/</span>
01685     <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; <a class="code" href="structPVRTMat4.html#a13">operator=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; rhs)
01686     {
01687         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;16; ++i)
01688         {
01689             f[i] =rhs.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[i];
01690         }
01691         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01692     }
01693 <span class="comment">/*!***************************************************************************</span>
01694 <span class="comment"> @Function          *</span>
01695 <span class="comment"> @Input             rhs a PVRTVec4</span>
01696 <span class="comment"> @Returns           result of multiplication</span>
01697 <span class="comment"> @Description       Matrix multiplication of 4x4 matrix and vec3</span>
<a name="l01698"></a><a class="code" href="structPVRTMat4.html#a8">01698</a> <span class="comment">*****************************************************************************/</span>
01699     <a class="code" href="structPVRTVec4.html">PVRTVec4</a> <a class="code" href="structPVRTMat4.html#a5">operator*</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec4.html">PVRTVec4</a>&amp; rhs)<span class="keyword"> const</span>
01700 <span class="keyword">    </span>{
01701         <a class="code" href="structPVRTVec4.html">PVRTVec4</a> out;
01702         out.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a>,f[0])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a>,f[4])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a>,f[8])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a>,f[12]);
01703         out.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a>,f[1])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a>,f[5])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a>,f[9])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a>,f[13]);
01704         out.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a>,f[2])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a>,f[6])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a>,f[10])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a>,f[14]);
01705         out.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a>,f[3])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a>,f[7])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a>,f[11])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a>,f[15]);
01706 
01707         <span class="keywordflow">return</span> out;
01708     }
01709 
01710 <span class="comment">/*!***************************************************************************</span>
01711 <span class="comment"> @Function          *=</span>
01712 <span class="comment"> @Input             rhs a PVRTVec4</span>
01713 <span class="comment"> @Returns           result of multiplication and assignment</span>
01714 <span class="comment"> @Description       Matrix multiplication and assignment of 4x4 matrix and vec3</span>
01715 <span class="comment">*****************************************************************************/</span>
<a name="l01716"></a><a class="code" href="structPVRTMat4.html#a9">01716</a>     <a class="code" href="structPVRTVec4.html">PVRTVec4</a> <a class="code" href="structPVRTMat4.html#a10">operator*=</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec4.html">PVRTVec4</a>&amp; rhs)<span class="keyword"> const</span>
01717 <span class="keyword">    </span>{
01718         <a class="code" href="structPVRTVec4.html">PVRTVec4</a> out;
01719         out.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a>,f[0])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a>,f[4])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a>,f[8])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a>,f[12]);
01720         out.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a>,f[1])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a>,f[5])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a>,f[9])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a>,f[13]);
01721         out.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a>,f[2])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a>,f[6])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a>,f[10])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a>,f[14]);
01722         out.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a> = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o0">x</a>,f[3])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o1">y</a>,f[7])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o2">z</a>,f[11])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(rhs.<a class="code" href="structPVRTVECTOR4f.html#o3">w</a>,f[15]);
01723 
01724         <span class="keywordflow">return</span> out;
01725     }
01726 
01727 <span class="comment">/*!***************************************************************************</span>
01728 <span class="comment"> @Function          inverse</span>
01729 <span class="comment"> @Returns           inverse mat4</span>
01730 <span class="comment"> @Description       Calculates multiplicative inverse of this matrix</span>
01731 <span class="comment">                    The matrix must be of the form :</span>
01732 <span class="comment">                    A 0</span>
01733 <span class="comment">                    C 1</span>
01734 <span class="comment">                    Where A is a 3x3 matrix and C is a 1x3 matrix.</span>
<a name="l01735"></a><a class="code" href="structPVRTMat4.html#a10">01735</a> <span class="comment">*****************************************************************************/</span>
01736     <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#a16">inverse</a>() <span class="keyword">const</span>;
01737 
01738 <span class="comment">/*!***************************************************************************</span>
01739 <span class="comment"> @Function          inverseEx</span>
01740 <span class="comment"> @Returns           inverse mat4</span>
01741 <span class="comment"> @Description       Calculates multiplicative inverse of this matrix</span>
01742 <span class="comment">                    Uses a linear equation solver and the knowledge that M.M^-1=I.</span>
01743 <span class="comment">                    Use this fn to calculate the inverse of matrices that</span>
01744 <span class="comment">                    inverse() cannot.</span>
01745 <span class="comment">*****************************************************************************/</span>
01746     <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#a17">inverseEx</a>()<span class="keyword"> const</span>
01747 <span class="keyword">    </span>{
01748         <a class="code" href="structPVRTMat4.html">PVRTMat4</a> out;
01749         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>        *ppRows[4];
01750         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>        pRes[4];
01751         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>        pIn[20];
01752         <span class="keywordtype">int</span>             i, j;
01753 
01754         <span class="keywordflow">for</span>(i = 0; i &lt; 4; ++i)
01755             ppRows[i] = &amp;pIn[i * 5];
01756 
01757         <span class="comment">/* Solve 4 sets of 4 linear equations */</span>
01758         <span class="keywordflow">for</span>(i = 0; i &lt; 4; ++i)
01759         {
01760             <span class="keywordflow">for</span>(j = 0; j &lt; 4; ++j)
01761             {
01762                 ppRows[j][0] = <a class="code" href="structPVRTMat4.html#e0">PVRTMat4::Identity</a>().<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[i + 4 * j];
01763                 memcpy(&amp;ppRows[j][1], &amp;f[j * 4], 4 * <span class="keyword">sizeof</span>(<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>));
01764             }
01765 
01766             <a class="code" href="PVRTVector_8h.html#a0">PVRTLinearEqSolve</a>(pRes, (<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>**)ppRows, 4);
01767 
01768             <span class="keywordflow">for</span>(j = 0; j &lt; 4; ++j)
01769             {
01770                 out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[i + 4 * j] = pRes[j];
01771             }
01772         }
<a name="l01773"></a><a class="code" href="structPVRTMat4.html#a11">01773</a> 
01774         <span class="keywordflow">return</span> out;
01775     }
01776 
01777 <span class="comment">/*!***************************************************************************</span>
01778 <span class="comment"> @Function          transpose</span>
01779 <span class="comment"> @Returns           transpose mat4</span>
01780 <span class="comment"> @Description       Calculates transpose of this matrix</span>
01781 <span class="comment">*****************************************************************************/</span>
01782     <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#a18">transpose</a>()<span class="keyword"> const</span>
01783 <span class="keyword">    </span>{
01784         <a class="code" href="structPVRTMat4.html">PVRTMat4</a> out;
01785         out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[0] = f[0];        out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[1] = f[4];        out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[2] = f[8];        out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[3] = f[12];
01786         out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[4] = f[1];        out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[5] = f[5];        out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[6] = f[9];        out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[7] = f[13];
01787         out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[8] = f[2];        out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[9] = f[6];        out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10] = f[10];      out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[11] = f[14];
<a name="l01788"></a><a class="code" href="structPVRTMat4.html#a12">01788</a>         out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[12] = f[3];       out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[13] = f[7];       out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[14] = f[11];      out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[15] = f[15];
01789         <span class="keywordflow">return</span> out;
01790     }
01791 
01792 <span class="comment">/*!***************************************************************************</span>
01793 <span class="comment"> @Function          postTranslate</span>
01794 <span class="comment"> @Input             tx distance of translation in x axis</span>
01795 <span class="comment"> @Input             ty distance of translation in y axis</span>
01796 <span class="comment"> @Input             tz distance of translation in z axis</span>
01797 <span class="comment"> @Returns           Returns this</span>
01798 <span class="comment"> @Description       Alters the translation component of the transformation matrix.</span>
01799 <span class="comment">*****************************************************************************/</span>
01800     <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; <a class="code" href="structPVRTMat4.html#a19">postTranslate</a>(VERTTYPE tx, VERTTYPE ty, VERTTYPE tz)
01801     {
01802         f[12] += <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(tx,f[0])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(ty,f[4])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(tz,f[8]);
01803         f[13] += <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(tx,f[1])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(ty,f[5])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(tz,f[9]);
<a name="l01804"></a><a class="code" href="structPVRTMat4.html#a13">01804</a>         f[14] += <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(tx,f[2])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(ty,f[6])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(tz,f[10]);
01805         f[15] += <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(tx,f[3])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(ty,f[7])+<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(tz,f[11]);
01806 
01807 <span class="comment">//          col(3) += tx * col(0) + ty * col(1) + tz * col(2);</span>
01808         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01809     }
01810 
01811 <span class="comment">/*!***************************************************************************</span>
01812 <span class="comment"> @Function          postTranslate</span>
01813 <span class="comment"> @Input             tvec translation vector</span>
01814 <span class="comment"> @Returns           Returns this</span>
01815 <span class="comment"> @Description       Alters the translation component of the transformation matrix.</span>
01816 <span class="comment">*****************************************************************************/</span>
01817     <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; <a class="code" href="structPVRTMat4.html#a19">postTranslate</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; tvec)
01818     {
<a name="l01819"></a><a class="code" href="structPVRTMat4.html#a14">01819</a>         <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#a19">postTranslate</a>(tvec.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>, tvec.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>, tvec.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>);
01820     }
01821 
01822 <span class="comment">/*!***************************************************************************</span>
01823 <span class="comment"> @Function          postTranslate</span>
01824 <span class="comment"> @Input             tx distance of translation in x axis</span>
01825 <span class="comment"> @Input             ty distance of translation in y axis</span>
01826 <span class="comment"> @Input             tz distance of translation in z axis</span>
01827 <span class="comment"> @Returns           Returns this</span>
01828 <span class="comment"> @Description       Translates the matrix from the passed parameters</span>
01829 <span class="comment">*****************************************************************************/</span>
01830     <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; <a class="code" href="structPVRTMat4.html#a21">preTranslate</a>(VERTTYPE tx, VERTTYPE ty, VERTTYPE tz)
01831     {
01832         f[0]+=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],tx); f[4]+=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[7],tx); f[8]+=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[11],tx);    f[12]+=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[15],tx);
01833         f[1]+=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],ty); f[5]+=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[7],ty); f[9]+=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[11],ty);    f[13]+=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[15],ty);
01834         f[2]+=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[3],tz); f[6]+=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[7],tz); f[10]+=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[11],tz);   f[14]+=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(f[15],tz);
01835 
01836 <span class="comment">//          row(0) += tx * row(3);</span>
<a name="l01837"></a><a class="code" href="structPVRTMat4.html#a15">01837</a> <span class="comment">//          row(1) += ty * row(3);</span>
01838 <span class="comment">//          row(2) += tz * row(3);</span>
01839         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01840     }
01841 
01842 <span class="comment">/*!***************************************************************************</span>
01843 <span class="comment"> @Function          postTranslate</span>
01844 <span class="comment"> @Input             tvec translation vector</span>
01845 <span class="comment"> @Returns           Returns the translation defined by the passed parameters</span>
01846 <span class="comment"> @Description       Translates the matrix from the passed parameters</span>
01847 <span class="comment">*****************************************************************************/</span>
01848     <a class="code" href="structPVRTMat4.html">PVRTMat4</a>&amp; <a class="code" href="structPVRTMat4.html#a21">preTranslate</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; tvec)
01849     {
01850         <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#a21">preTranslate</a>(tvec.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>, tvec.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>, tvec.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>);
01851     }
01852 <span class="comment">/*!***************************************************************************</span>
01853 <span class="comment"> @Function          ptr</span>
01854 <span class="comment"> @Returns           pointer to an array of the elements of this PVRTMat4</span>
01855 <span class="comment"> @Description       Calculates transpose of this matrix</span>
01856 <span class="comment">*****************************************************************************/</span>
01857     <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> *<a class="code" href="structPVRTMat4.html#a23">ptr</a>() { <span class="keywordflow">return</span> (<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>*)&amp;f; }
01858 
01859 <span class="comment">/*!***************************************************************************</span>
01860 <span class="comment">** Static factory functions</span>
01861 <span class="comment">*****************************************************************************/</span>
01862 <span class="comment">/*!***************************************************************************</span>
01863 <span class="comment"> @Function          Identity</span>
01864 <span class="comment"> @Returns           a PVRTMat4 representation of the 4x4 identity matrix</span>
01865 <span class="comment"> @Description       Generates an identity matrix</span>
01866 <span class="comment">*****************************************************************************/</span>
01867     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e0">Identity</a>()
01868     {
<a name="l01869"></a><a class="code" href="structPVRTMat4.html#a17">01869</a>         <a class="code" href="structPVRTMat4.html">PVRTMat4</a> out;
01870         out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[0] = <a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1);out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[1] = 0;out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[2] = 0;out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[3] = 0;
01871         out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[4] = 0;out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[5] = <a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1);out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[6] = 0;out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[7] = 0;
01872         out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[8] = 0;out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[9] = 0;out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10] = <a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1);out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[11] = 0;
01873         out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[12] = 0;out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[13] = 0;out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[14] = 0;out.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[15] = <a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1);
01874         <span class="keywordflow">return</span> out;
01875     }
01876 
01877 <span class="comment">/*!***************************************************************************</span>
01878 <span class="comment"> @Function          RotationX</span>
01879 <span class="comment"> @Returns           a PVRTMat3 corresponding to the requested rotation</span>
01880 <span class="comment"> @Description       Calculates a matrix corresponding to a rotation of angle</span>
01881 <span class="comment">                    degrees about the X axis</span>
01882 <span class="comment">*****************************************************************************/</span>
01883     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e1">RotationX</a>(VERTTYPE angle);
01884 <span class="comment">/*!***************************************************************************</span>
01885 <span class="comment"> @Function          RotationY</span>
01886 <span class="comment"> @Returns           a PVRTMat3 corresponding to the requested rotation</span>
01887 <span class="comment"> @Description       Calculates a matrix corresponding to a rotation of angle</span>
01888 <span class="comment">                    degrees about the Y axis</span>
01889 <span class="comment">*****************************************************************************/</span>
01890     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e2">RotationY</a>(VERTTYPE angle);
01891 <span class="comment">/*!***************************************************************************</span>
01892 <span class="comment"> @Function          RotationZ</span>
01893 <span class="comment"> @Returns           a PVRTMat3 corresponding to the requested rotation</span>
01894 <span class="comment"> @Description       Calculates a matrix corresponding to a rotation of angle</span>
01895 <span class="comment">                    degrees about the Z axis</span>
01896 <span class="comment">*****************************************************************************/</span>
01897     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e3">RotationZ</a>(VERTTYPE angle);
01898 
01899 <span class="comment">/*!***************************************************************************</span>
01900 <span class="comment"> @Function          Scale</span>
01901 <span class="comment"> @Returns           a PVRTMat3 corresponding to the requested scaling transformation</span>
01902 <span class="comment"> @Description       Calculates a matrix corresponding to scaling of fx, fy and fz</span>
01903 <span class="comment">                    times in each axis.</span>
01904 <span class="comment">*****************************************************************************/</span>
01905     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e4">Scale</a>(<span class="keyword">const</span> VERTTYPE fx,<span class="keyword">const</span> VERTTYPE fy,<span class="keyword">const</span> VERTTYPE fz)
<a name="l01906"></a><a class="code" href="structPVRTMat4.html#a18">01906</a>     {
01907         <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#a0">PVRTMat4</a>(fx,0,0,0,
01908             0,fy,0,0,
01909             0,0,fz,0,
01910             0,0,0,<a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1));
01911     }
01912 
01913 <span class="comment">/*!***************************************************************************</span>
01914 <span class="comment"> @Function          Translation</span>
01915 <span class="comment"> @Returns           a PVRTMat4 corresponding to the requested translation</span>
01916 <span class="comment"> @Description       Calculates a 4x4 matrix corresponding to a transformation</span>
01917 <span class="comment">                    of tx, ty and tz distance in each axis.</span>
01918 <span class="comment">*****************************************************************************/</span>
01919     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e5">Translation</a>(<span class="keyword">const</span> VERTTYPE tx, <span class="keyword">const</span> VERTTYPE ty, <span class="keyword">const</span> VERTTYPE tz)
01920     {
01921         <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#a0">PVRTMat4</a>(<a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1),0,0,0,
01922             0,<a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1),0,0,
01923             0,0,<a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1),0,
01924             tx,ty,tz,<a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1));
<a name="l01925"></a><a class="code" href="structPVRTMat4.html#a19">01925</a>     }
01926 
01927 <span class="comment">/*!***************************************************************************</span>
01928 <span class="comment">** Clipspace enum</span>
01929 <span class="comment">** Determines whether clip space Z ranges from -1 to 1 (OGL) or from 0 to 1 (D3D)</span>
01930 <span class="comment">*****************************************************************************/</span>
01931     <span class="keyword">enum</span> eClipspace { OGL, D3D };
01932 
01933 <span class="comment">/*!***************************************************************************</span>
01934 <span class="comment"> @Function          Ortho</span>
01935 <span class="comment"> @Input             left view plane</span>
01936 <span class="comment"> @Input             top view plane</span>
01937 <span class="comment"> @Input             right view plane</span>
01938 <span class="comment"> @Input             bottom view plane</span>
01939 <span class="comment"> @Input             nearPlane the near rendering plane</span>
01940 <span class="comment"> @Input             farPlane the far rendering plane</span>
01941 <span class="comment"> @Input             cs which clipspace convention is being used</span>
01942 <span class="comment"> @Input             bRotate is the viewport in portrait or landscape mode</span>
<a name="l01943"></a><a class="code" href="structPVRTMat4.html#a20">01943</a> <span class="comment"> @Returns           Returns the orthogonal projection matrix defined by the passed parameters</span>
01944 <span class="comment"> @Description       Translates the matrix from the passed parameters</span>
01945 <span class="comment">*****************************************************************************/</span>
01946     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e6">Ortho</a>(VERTTYPE left, VERTTYPE top, VERTTYPE right,
01947         VERTTYPE bottom, VERTTYPE nearPlane, VERTTYPE farPlane, <span class="keyword">const</span> eClipspace cs, <span class="keywordtype">bool</span> bRotate = <span class="keyword">false</span>)
01948     {
01949         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> rcplmr = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>(1),(left - right));
01950         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> rcpbmt = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>(1),(bottom - top));
01951         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> rcpnmf = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>(1),(nearPlane - farPlane));
01952 
01953         <a class="code" href="structPVRTMat4.html">PVRTMat4</a> result;
01954 
01955         <span class="keywordflow">if</span> (bRotate)
01956         {
<a name="l01957"></a><a class="code" href="structPVRTMat4.html#a21">01957</a>             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[0]=0;      result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[4]=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(2,rcplmr); result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[8]=0; result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[12]=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(-(right+left),rcplmr);
01958             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[1]=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(-2,rcpbmt); result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[5]=0;      result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[9]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[13]=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>((top+bottom),rcpbmt);
01959         }
01960         <span class="keywordflow">else</span>
01961         {
01962             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[0]=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(-2,rcplmr); result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[4]=0; result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[8]=0; result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[12]=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(right+left,rcplmr);
01963             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[1]=0;      result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[5]=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(-2,rcpbmt); result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[9]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[13]=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>((top+bottom),rcpbmt);
01964         }
01965         <span class="keywordflow">if</span> (cs == <a class="code" href="structPVRTMat4.html#w2w1">D3D</a>)
01966         {
01967             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[2]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[6]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10]=-rcpnmf;   result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[14]=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(nearPlane,rcpnmf);
01968         }
01969         <span class="keywordflow">else</span>
01970         {
01971             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[2]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[6]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10]=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(-2,rcpnmf);    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[14]=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(nearPlane + farPlane,rcpnmf);
01972         }
01973         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[3]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[7]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[11]=0; result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[15]=1;
01974 
01975         <span class="keywordflow">return</span> result;
<a name="l01976"></a><a class="code" href="structPVRTMat4.html#a22">01976</a>     }
01977 
01978 
01979 <span class="comment">/*!***************************************************************************</span>
01980 <span class="comment"> @Function          LookAtRH</span>
01981 <span class="comment"> @Input             vEye position of 'camera'</span>
01982 <span class="comment"> @Input             vAt target that camera points at</span>
01983 <span class="comment"> @Input             vUp up vector for camera</span>
01984 <span class="comment"> @Returns           Returns the view matrix defined by the passed parameters</span>
01985 <span class="comment"> @Description       Create a look-at view matrix for a right hand coordinate</span>
<a name="l01986"></a><a class="code" href="structPVRTMat4.html#a23">01986</a> <span class="comment">                    system</span>
01987 <span class="comment">*****************************************************************************/</span>
01988     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e7">LookAtRH</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; vEye, <span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; vAt, <span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; vUp)
01989         { <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#e17">LookAt</a>(vEye, vAt, vUp, <span class="keyword">true</span>); }
01990 <span class="comment">/*!***************************************************************************</span>
01991 <span class="comment"> @Function          LookAtLH</span>
01992 <span class="comment"> @Input             vEye position of 'camera'</span>
01993 <span class="comment"> @Input             vAt target that camera points at</span>
01994 <span class="comment"> @Input             vUp up vector for camera</span>
01995 <span class="comment"> @Returns           Returns the view matrix defined by the passed parameters</span>
01996 <span class="comment"> @Description       Create a look-at view matrix for a left hand coordinate</span>
<a name="l01997"></a><a class="code" href="structPVRTMat4.html#e0">01997</a> <span class="comment">                    system</span>
01998 <span class="comment">*****************************************************************************/</span>
01999     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e8">LookAtLH</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; vEye, <span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; vAt, <span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; vUp)
02000         { <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#e17">LookAt</a>(vEye, vAt, vUp, <span class="keyword">false</span>); }
02001 
02002 <span class="comment">/*!***************************************************************************</span>
02003 <span class="comment"> @Function      PerspectiveRH</span>
02004 <span class="comment"> @Input         width       width of viewplane</span>
02005 <span class="comment"> @Input         height      height of viewplane</span>
02006 <span class="comment"> @Input         nearPlane   near clipping distance</span>
02007 <span class="comment"> @Input         farPlane    far clipping distance</span>
02008 <span class="comment"> @Input         cs          cs which clipspace convention is being used</span>
02009 <span class="comment"> @Input         bRotate is the viewport in portrait or landscape mode</span>
02010 <span class="comment"> @Returns       Perspective matrix</span>
02011 <span class="comment"> @Description   Create a perspective matrix for a right hand coordinate</span>
02012 <span class="comment">                system</span>
02013 <span class="comment">*****************************************************************************/</span>
02014     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e9">PerspectiveRH</a>(VERTTYPE width, VERTTYPE height, VERTTYPE nearPlane,
02015         VERTTYPE farPlane, <span class="keyword">const</span> eClipspace cs, <span class="keywordtype">bool</span> bRotate = <span class="keyword">false</span>)
02016         { <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#e18">Perspective</a>(width, height, nearPlane, farPlane, cs, <span class="keyword">true</span>, bRotate); }
02017 
02018 <span class="comment">/*!***************************************************************************</span>
02019 <span class="comment"> @Function      PerspectiveLH</span>
02020 <span class="comment"> @Input         width       width of viewplane</span>
02021 <span class="comment"> @Input         height      height of viewplane</span>
02022 <span class="comment"> @Input         nearPlane   near clipping distance</span>
02023 <span class="comment"> @Input         farPlane    far clipping distance</span>
02024 <span class="comment"> @Input         cs          cs which clipspace convention is being used</span>
02025 <span class="comment"> @Input         bRotate is the viewport in portrait or landscape mode</span>
02026 <span class="comment"> @Returns       Perspective matrix</span>
02027 <span class="comment"> @Description   Create a perspective matrix for a left hand coordinate</span>
02028 <span class="comment">                system</span>
02029 <span class="comment">*****************************************************************************/</span>
02030     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e10">PerspectiveLH</a>(VERTTYPE width, VERTTYPE height, VERTTYPE nearPlane, VERTTYPE farPlane, <span class="keyword">const</span> eClipspace cs, <span class="keywordtype">bool</span> bRotate = <span class="keyword">false</span>)
02031         { <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#e18">Perspective</a>(width, height, nearPlane, farPlane, cs, <span class="keyword">false</span>, bRotate); }
02032 
02033 <span class="comment">/*!***************************************************************************</span>
02034 <span class="comment"> @Function      PerspectiveFloatDepthRH</span>
02035 <span class="comment"> @Input         width       width of viewplane</span>
02036 <span class="comment"> @Input         height      height of viewplane</span>
02037 <span class="comment"> @Input         nearPlane   near clipping distance</span>
02038 <span class="comment"> @Input         cs          cs which clipspace convention is being used</span>
<a name="l02039"></a><a class="code" href="structPVRTMat4.html#e4">02039</a> <span class="comment"> @Input         bRotate is the viewport in portrait or landscape mode</span>
02040 <span class="comment"> @Returns       Perspective matrix</span>
02041 <span class="comment"> @Description   Create a perspective matrix for a right hand coordinate</span>
02042 <span class="comment">                system</span>
02043 <span class="comment">*****************************************************************************/</span>
02044     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e11">PerspectiveFloatDepthRH</a>(VERTTYPE width, VERTTYPE height, VERTTYPE nearPlane, <span class="keyword">const</span> eClipspace cs, <span class="keywordtype">bool</span> bRotate = <span class="keyword">false</span>)
02045         { <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#e19">PerspectiveFloatDepth</a>(width, height, nearPlane, cs, <span class="keyword">true</span>, bRotate); }
02046 
02047 <span class="comment">/*!***************************************************************************</span>
02048 <span class="comment"> @Function      PerspectiveFloatDepthLH</span>
02049 <span class="comment"> @Input         width       width of viewplane</span>
02050 <span class="comment"> @Input         height      height of viewplane</span>
02051 <span class="comment"> @Input         nearPlane   near clipping distance</span>
02052 <span class="comment"> @Input         cs          cs which clipspace convention is being used</span>
02053 <span class="comment"> @Input         bRotate is the viewport in portrait or landscape mode</span>
<a name="l02054"></a><a class="code" href="structPVRTMat4.html#e5">02054</a> <span class="comment"> @Returns       Perspective matrix</span>
02055 <span class="comment"> @Description   Create a perspective matrix for a left hand coordinate</span>
02056 <span class="comment">                system</span>
02057 <span class="comment">*****************************************************************************/</span>
02058     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e12">PerspectiveFloatDepthLH</a>(VERTTYPE width, VERTTYPE height, VERTTYPE nearPlane, <span class="keyword">const</span> eClipspace cs, <span class="keywordtype">bool</span> bRotate = <span class="keyword">false</span>)
02059         { <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#e19">PerspectiveFloatDepth</a>(width, height, nearPlane, cs, <span class="keyword">false</span>, bRotate); }
02060 
02061 <span class="comment">/*!***************************************************************************</span>
02062 <span class="comment"> @Function      PerspectiveFovRH</span>
02063 <span class="comment"> @Input         fovy        angle of view (vertical)</span>
02064 <span class="comment"> @Input         aspect      aspect ratio of view</span>
02065 <span class="comment"> @Input         nearPlane   near clipping distance</span>
<a name="l02066"></a><a class="code" href="structPVRTMat4.html#w2">02066</a> <span class="comment"> @Input         farPlane    far clipping distance</span>
02067 <span class="comment"> @Input         cs          cs which clipspace convention is being used</span>
02068 <span class="comment"> @Input         bRotate is the viewport in portrait or landscape mode</span>
02069 <span class="comment"> @Returns       Perspective matrix</span>
02070 <span class="comment"> @Description   Create a perspective matrix for a right hand coordinate</span>
02071 <span class="comment">                system</span>
02072 <span class="comment">*****************************************************************************/</span>
02073     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e13">PerspectiveFovRH</a>(VERTTYPE fovy, VERTTYPE aspect, VERTTYPE nearPlane, VERTTYPE farPlane, <span class="keyword">const</span> eClipspace cs, <span class="keywordtype">bool</span> bRotate = <span class="keyword">false</span>)
02074         { <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#e20">PerspectiveFov</a>(fovy, aspect, nearPlane, farPlane, cs, <span class="keyword">true</span>, bRotate); }
02075 <span class="comment">/*!***************************************************************************</span>
02076 <span class="comment"> @Function      PerspectiveFovLH</span>
02077 <span class="comment"> @Input         fovy        angle of view (vertical)</span>
02078 <span class="comment"> @Input         aspect      aspect ratio of view</span>
02079 <span class="comment"> @Input         nearPlane   near clipping distance</span>
02080 <span class="comment"> @Input         farPlane    far clipping distance</span>
02081 <span class="comment"> @Input         cs          cs which clipspace convention is being used</span>
<a name="l02082"></a><a class="code" href="structPVRTMat4.html#e6">02082</a> <span class="comment"> @Input         bRotate is the viewport in portrait or landscape mode</span>
02083 <span class="comment"> @Returns       Perspective matrix</span>
02084 <span class="comment"> @Description   Create a perspective matrix for a left hand coordinate</span>
02085 <span class="comment">                system</span>
02086 <span class="comment">*****************************************************************************/</span>
02087     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e14">PerspectiveFovLH</a>(VERTTYPE fovy, VERTTYPE aspect, VERTTYPE nearPlane, VERTTYPE farPlane, <span class="keyword">const</span> eClipspace cs, <span class="keywordtype">bool</span> bRotate = <span class="keyword">false</span>)
02088         { <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#e20">PerspectiveFov</a>(fovy, aspect, nearPlane, farPlane, cs, <span class="keyword">false</span>, bRotate); }
02089 
02090 <span class="comment">/*!***************************************************************************</span>
02091 <span class="comment"> @Function      PerspectiveFovRH</span>
02092 <span class="comment"> @Input         fovy        angle of view (vertical)</span>
02093 <span class="comment"> @Input         aspect      aspect ratio of view</span>
02094 <span class="comment"> @Input         nearPlane   near clipping distance</span>
02095 <span class="comment"> @Input         cs          cs which clipspace convention is being used</span>
02096 <span class="comment"> @Input         bRotate is the viewport in portrait or landscape mode</span>
02097 <span class="comment"> @Returns       Perspective matrix</span>
02098 <span class="comment"> @Description   Create a perspective matrix for a right hand coordinate</span>
02099 <span class="comment">                system</span>
02100 <span class="comment">*****************************************************************************/</span>
02101     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e15">PerspectiveFovFloatDepthRH</a>(VERTTYPE fovy, VERTTYPE aspect, VERTTYPE nearPlane, <span class="keyword">const</span> eClipspace cs, <span class="keywordtype">bool</span> bRotate = <span class="keyword">false</span>)
02102         { <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#e21">PerspectiveFovFloatDepth</a>(fovy, aspect, nearPlane, cs, <span class="keyword">true</span>, bRotate); }
02103 <span class="comment">/*!***************************************************************************</span>
02104 <span class="comment"> @Function      PerspectiveFovLH</span>
02105 <span class="comment"> @Input         fovy        angle of view (vertical)</span>
02106 <span class="comment"> @Input         aspect      aspect ratio of view</span>
02107 <span class="comment"> @Input         nearPlane   near clipping distance</span>
02108 <span class="comment"> @Input         cs          cs which clipspace convention is being used</span>
02109 <span class="comment"> @Input         bRotate is the viewport in portrait or landscape mode</span>
02110 <span class="comment"> @Returns       Perspective matrix</span>
02111 <span class="comment"> @Description   Create a perspective matrix for a left hand coordinate</span>
02112 <span class="comment">                system</span>
02113 <span class="comment">*****************************************************************************/</span>
02114     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e16">PerspectiveFovFloatDepthLH</a>(VERTTYPE fovy, VERTTYPE aspect, VERTTYPE nearPlane, <span class="keyword">const</span> eClipspace cs, <span class="keywordtype">bool</span> bRotate = <span class="keyword">false</span>)
02115         { <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#e21">PerspectiveFovFloatDepth</a>(fovy, aspect, nearPlane, cs, <span class="keyword">false</span>, bRotate); }
02116 
02117 <span class="comment">/*!***************************************************************************</span>
02118 <span class="comment"> @Function          LookAt</span>
02119 <span class="comment"> @Input             vEye position of 'camera'</span>
02120 <span class="comment"> @Input             vAt target that camera points at</span>
02121 <span class="comment"> @Input             vUp up vector for camera</span>
02122 <span class="comment"> @Input             bRightHanded handedness of coordinate system</span>
02123 <span class="comment"> @Returns           Returns the view matrix defined by the passed parameters</span>
02124 <span class="comment"> @Description       Create a look-at view matrix</span>
<a name="l02125"></a><a class="code" href="structPVRTMat4.html#e7">02125</a> <span class="comment">*****************************************************************************/</span>
02126     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e17">LookAt</a>(<span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; vEye, <span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; vAt, <span class="keyword">const</span> <a class="code" href="structPVRTVec3.html">PVRTVec3</a>&amp; vUp, <span class="keywordtype">bool</span> bRightHanded)
02127     {
02128         <a class="code" href="structPVRTVec3.html">PVRTVec3</a> vForward, vUpNorm, vSide;
02129         <a class="code" href="structPVRTMat4.html">PVRTMat4</a> result;
02130 
02131         vForward = (bRightHanded) ? vEye - vAt : vAt - vEye;
02132 
02133         vForward.<a class="code" href="structPVRTVec3.html#a19">normalize</a>();
02134         vUpNorm = vUp.<a class="code" href="structPVRTVec3.html#a20">normalized</a>();
02135         vSide   = vUpNorm.<a class="code" href="structPVRTVec3.html#a22">cross</a>( vForward);
02136         vUpNorm = vForward.<a class="code" href="structPVRTVec3.html#a22">cross</a>(vSide);
<a name="l02137"></a><a class="code" href="structPVRTMat4.html#e8">02137</a> 
02138         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[0]=vSide.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>;    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[4]=vSide.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>;    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[8]=vSide.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>;        result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[12]=0;
02139         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[1]=vUpNorm.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[5]=vUpNorm.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[9]=vUpNorm.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>;      result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[13]=0;
02140         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[2]=vForward.<a class="code" href="structPVRTVECTOR3f.html#o0">x</a>; result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[6]=vForward.<a class="code" href="structPVRTVECTOR3f.html#o1">y</a>; result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10]=vForward.<a class="code" href="structPVRTVECTOR3f.html#o2">z</a>;    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[14]=0;
02141         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[3]=0;          result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[7]=0;          result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[11]=0;             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[15]=<a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1);
02142 
02143 
02144         result.<a class="code" href="structPVRTMat4.html#a19">postTranslate</a>(-vEye);
02145         <span class="keywordflow">return</span> result;
02146     }
02147 
02148 <span class="comment">/*!***************************************************************************</span>
02149 <span class="comment"> @Function      Perspective</span>
02150 <span class="comment"> @Input         width       width of viewplane</span>
02151 <span class="comment"> @Input         height      height of viewplane</span>
02152 <span class="comment"> @Input         nearPlane   near clipping distance</span>
<a name="l02153"></a><a class="code" href="structPVRTMat4.html#e9">02153</a> <span class="comment"> @Input         farPlane    far clipping distance</span>
02154 <span class="comment"> @Input         cs          which clipspace convention is being used</span>
02155 <span class="comment"> @Input         bRightHanded    handedness of coordinate system</span>
02156 <span class="comment"> @Input         bRotate     is the viewport in portrait or landscape mode</span>
02157 <span class="comment"> @Returns       Perspective matrix</span>
02158 <span class="comment"> @Description   Create a perspective matrix</span>
02159 <span class="comment">*****************************************************************************/</span>
02160     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e18">Perspective</a>(
02161         VERTTYPE width, VERTTYPE height,
02162         VERTTYPE nearPlane, VERTTYPE farPlane,
02163         <span class="keyword">const</span> eClipspace cs,
02164         <span class="keywordtype">bool</span> bRightHanded,
02165         <span class="keywordtype">bool</span> bRotate = <span class="keyword">false</span>)
02166     {
02167         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> n2 = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(<a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(2),nearPlane);
02168         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> rcpnmf = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(<a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1),(nearPlane - farPlane));
02169 
<a name="l02170"></a><a class="code" href="structPVRTMat4.html#e10">02170</a>         <a class="code" href="structPVRTMat4.html">PVRTMat4</a> result;
02171         <span class="keywordflow">if</span> (bRotate)
02172         {
02173             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[0] = 0;    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[4]=<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(-n2,width); result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[8]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[12]=0;
02174             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[1] = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(n2,height);   result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[5]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[9]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[13]=0;
02175         }
02176         <span class="keywordflow">else</span>
02177         {
02178             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[0] = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(n2,width);    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[4]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[8]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[12]=0;
02179             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[1] = 0;    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[5]=<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(n2,height); result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[9]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[13]=0;
02180         }
02181         <span class="keywordflow">if</span> (cs == <a class="code" href="structPVRTMat4.html#w2w1">D3D</a>)
02182         {
02183             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[2] = 0;    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[6]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10]=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(farPlane,rcpnmf);  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[14]=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(farPlane,rcpnmf),nearPlane);
02184         }
<a name="l02185"></a><a class="code" href="structPVRTMat4.html#e11">02185</a>         <span class="keywordflow">else</span>
02186         {
02187             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[2] = 0;    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[6]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10]=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(farPlane+nearPlane,rcpnmf);    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[14]=<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(farPlane,rcpnmf),n2);
02188         }
02189         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[3] = 0;    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[7]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[11]=<a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(-1);  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[15]=0;
02190 
02191         <span class="keywordflow">if</span> (!bRightHanded)
02192         {
02193             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10] = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10], <a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(-1));
02194             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[11] = <a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(1);
02195         }
02196 
02197         <span class="keywordflow">return</span> result;
02198     }
02199 
<a name="l02200"></a><a class="code" href="structPVRTMat4.html#e12">02200</a> <span class="comment">/*!***************************************************************************</span>
02201 <span class="comment"> @Function      Perspective</span>
02202 <span class="comment"> @Input         width       width of viewplane</span>
02203 <span class="comment"> @Input         height      height of viewplane</span>
02204 <span class="comment"> @Input         nearPlane   near clipping distance</span>
02205 <span class="comment"> @Input         cs          which clipspace convention is being used</span>
02206 <span class="comment"> @Input         bRightHanded    handedness of coordinate system</span>
02207 <span class="comment"> @Input         bRotate     is the viewport in portrait or landscape mode</span>
02208 <span class="comment"> @Returns       Perspective matrix</span>
02209 <span class="comment"> @Description   perspective calculation where far plane is assumed to be at an infinite distance and the screen</span>
02210 <span class="comment">                space Z is inverted</span>
02211 <span class="comment">*****************************************************************************/</span>
02212     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e19">PerspectiveFloatDepth</a>(
02213         VERTTYPE width, VERTTYPE height,
02214         VERTTYPE nearPlane,
02215         <span class="keyword">const</span> eClipspace cs,
<a name="l02216"></a><a class="code" href="structPVRTMat4.html#e13">02216</a>         <span class="keywordtype">bool</span> bRightHanded,
02217         <span class="keywordtype">bool</span> bRotate = <span class="keyword">false</span>)
02218     {
02219         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> n2 = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(2,nearPlane);
02220 
02221         <a class="code" href="structPVRTMat4.html">PVRTMat4</a> result;
02222         <span class="keywordflow">if</span> (bRotate)
02223         {
02224             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[0] = 0;    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[4]=<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(-n2,width); result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[8]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[12]=0;
02225             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[1] = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(n2,height);   result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[5]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[9]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[13]=0;
02226         }
02227         <span class="keywordflow">else</span>
02228         {
02229             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[0] = <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(n2,width);    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[4]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[8]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[12]=0;
02230             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[1] = 0;    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[5]=<a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(n2,height); result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[9]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[13]=0;
<a name="l02231"></a><a class="code" href="structPVRTMat4.html#e14">02231</a>         }
02232         <span class="keywordflow">if</span> (cs == D3D)
02233         {
02234             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[2] = 0;    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[6]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10]=0; result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[14]=nearPlane;
02235         }
02236         <span class="keywordflow">else</span>
02237         {
02238             result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[2] = 0;    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[6]=0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[10]=(bRightHanded?(<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>)1:(<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>)-1);   result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[14]=n2;
02239         }
02240         result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[3] = (<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>)0;  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[7]=(<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>)0;    result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[11]= (bRightHanded?(<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>)-1:(<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>)1);  result.<a class="code" href="classPVRTMATRIXf.html#o0">f</a>[15]=(<a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a>)0;
02241 
02242         <span class="keywordflow">return</span> result;
02243     }
02244 
02245 <span class="comment">/*!***************************************************************************</span>
<a name="l02246"></a><a class="code" href="structPVRTMat4.html#e15">02246</a> <span class="comment"> @Function      Perspective</span>
02247 <span class="comment"> @Input         fovy        angle of view (vertical)</span>
02248 <span class="comment"> @Input         aspect      aspect ratio of view</span>
02249 <span class="comment"> @Input         nearPlane   near clipping distance</span>
02250 <span class="comment"> @Input         farPlane    far clipping distance</span>
02251 <span class="comment"> @Input         cs          cs which clipspace convention is being used</span>
02252 <span class="comment"> @Input         bRightHanded    handedness of coordinate system</span>
02253 <span class="comment"> @Input         bRotate     is the viewport in portrait or landscape mode</span>
02254 <span class="comment"> @Returns       Perspective matrix</span>
02255 <span class="comment"> @Description   perspective calculation where field of view is used instead of near plane dimensions</span>
02256 <span class="comment">*****************************************************************************/</span>
02257     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e20">PerspectiveFov</a>(
02258         VERTTYPE fovy, VERTTYPE aspect,
02259         VERTTYPE nearPlane, VERTTYPE farPlane,
<a name="l02260"></a><a class="code" href="structPVRTMat4.html#e16">02260</a>         <span class="keyword">const</span> eClipspace cs,
02261         <span class="keywordtype">bool</span> bRightHanded,
02262         <span class="keywordtype">bool</span> bRotate = <span class="keyword">false</span>)
02263     {
02264         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> height = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(<a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(2.0f),nearPlane),<a class="code" href="PVRTFixedPoint_8h.html#a33">PVRTTAN</a>(<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(fovy,<a class="code" href="PVRTFixedPoint_8h.html#a25">f2vt</a>(0.5f))));
02265         <span class="keywordflow">if</span> (bRotate) <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#e18">Perspective</a>(height, <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(height,aspect), nearPlane, farPlane, cs, bRightHanded, bRotate);
02266         <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#e18">Perspective</a>(<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(height,aspect), height, nearPlane, farPlane, cs, bRightHanded, bRotate);
02267     }
02268 
02269 <span class="comment">/*!***************************************************************************</span>
02270 <span class="comment"> @Function      Perspective</span>
02271 <span class="comment"> @Input         fovy        angle of view (vertical)</span>
02272 <span class="comment"> @Input         aspect      aspect ratio of view</span>
<a name="l02273"></a><a class="code" href="structPVRTMat4.html#e17">02273</a> <span class="comment"> @Input         nearPlane   near clipping distance</span>
02274 <span class="comment"> @Input         cs          cs which clipspace convention is being used</span>
02275 <span class="comment"> @Input         bRightHanded    handedness of coordinate system</span>
02276 <span class="comment"> @Input         bRotate     is the viewport in portrait or landscape mode</span>
02277 <span class="comment"> @Returns       Perspective matrix</span>
02278 <span class="comment"> @Description   perspective calculation where field of view is used instead of near plane dimensions</span>
02279 <span class="comment">                and far plane is assumed to be at an infinite distance with inverted Z range</span>
02280 <span class="comment">*****************************************************************************/</span>
02281     <span class="keyword">static</span> <a class="code" href="structPVRTMat4.html">PVRTMat4</a> <a class="code" href="structPVRTMat4.html#e21">PerspectiveFovFloatDepth</a>(
02282         VERTTYPE fovy, VERTTYPE aspect,
02283         VERTTYPE nearPlane,
02284         <span class="keyword">const</span> eClipspace cs,
02285         <span class="keywordtype">bool</span> bRightHanded,
02286         <span class="keywordtype">bool</span> bRotate = <span class="keyword">false</span>)
02287     {
02288         <a class="code" href="PVRTFixedPoint_8h.html#a0">VERTTYPE</a> height = <a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(2,nearPlane), <a class="code" href="PVRTFixedPoint_8h.html#a33">PVRTTAN</a>(<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(fovy,0.5)));
02289         <span class="keywordflow">if</span> (bRotate) <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#e19">PerspectiveFloatDepth</a>(height, <a class="code" href="PVRTFixedPoint_8h.html#a23">VERTTYPEDIV</a>(height,aspect), nearPlane, cs, bRightHanded, bRotate);
02290         <span class="keywordflow">return</span> <a class="code" href="structPVRTMat4.html#e19">PerspectiveFloatDepth</a>(<a class="code" href="PVRTFixedPoint_8h.html#a22">VERTTYPEMUL</a>(height,aspect), height, nearPlane, cs, bRightHanded, bRotate);
02291     }
02292 };
02293 
02294 <span class="preprocessor">#endif </span><span class="comment">/*__PVRTVECTOR_H__*/</span>
02295 
02296 <span class="comment">/*****************************************************************************</span>
02297 <span class="comment">End of file (PVRTVector.h)</span>
02298 <span class="comment">*****************************************************************************/</span>
02299 
</pre></div><br>
<br>
<P align=left><FONT size=2><STRONG><A 
   href="http://www.imgtec.com/powervr/insider/legal/index.asp">Copyright</A> © 
   1999-2008, Imagination Technologies Ltd.</STRONG></FONT></P>
<hr>
<address style="align: left;"><small><FONT color=f0f>
Generated by <a href="http://www.doxygen.org/index.html">DOXYGEN</a> 1.3.6</small></address>
</body>
</html>
